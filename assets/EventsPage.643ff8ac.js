import{l as te,m as q,h as le,i as M,n as ae,g as W,b as K,c as j,C as se,j as X,W as oe,o as ge,p as fe,q as ve,r as be,s as pe,P as _e}from"./EventsPage.vue_vue_type_style_index_0_scoped_true_lang.1bc1895a.js";import{Q as B}from"./QBtn.17e996f6.js";import{_ as O,A as Y,Q as E,p as G,w as ye,x as we}from"./QImg.55f0a45b.js";import{r as d,f as ne,p as re,G as S,N as U,L as s,I as l,K as n,J as k,R as C,z as ie,H as A,U as J,T as Z,M as i,O as Te,w as Ce,at as ee,au as I,av as De}from"./index.bfb0d258.js";import{d as de,f as ce}from"./debounce.0895440a.js";const ke={name:"UpdatedCompetitionTable",setup(){d([]);const m=d([]),t=d(""),_=d(null),e=d(!1),b=d(!1),p=d(78623),a=d("Loading..."),h={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},f={low:"progress-low",medium:"progress-medium",high:"progress-high"},w=r=>r<5e5?f.none:r<15e5?f.low:r<3e6?f.medium:f.high,c=r=>r<1e6?`${(r/1e3).toFixed(2)}K`:`${(r/1e6).toFixed(2)}M`,y=r=>`${(r/1e6).toFixed(2)}M`,D=d([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(r,u)=>`<img src="${u.typeImage}" alt="${u.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(r,u)=>u.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(r,u)=>u.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),T=async()=>{b.value=!0;const r=new oe({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const u=await r.competitions.getCompetitionDetails(p.value);a.value=u.title,m.value=u.participations.map(o=>{const R=o.player.exp||0,V=o.progress.gained||0;return{id:o.player.id,username:o.player.displayName,type:o.player.type,typeImage:h[o.player.type]||h.unknown,exp:c(R),rawXp:R,lastChangedAt:ce(new Date(o.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:c(V),rawGainedXP:V,progressGained:c(o.progress.gained),progressStart:c(o.progress.start),progressEnd:c(o.progress.end),levelsGained:c(o.levels.gained),levelsStart:c(o.levels.start),levelsEnd:c(o.levels.end),progressLevels:`Gained: ${c(o.progress.gained)}, Start: ${c(o.progress.start)}, End: ${c(o.progress.end)}
              <br />
              Levels: Gained: ${o.levels.gained},
              Start: ${o.levels.start},
              End: ${o.levels.end}`,totalGained:`EXP: ${y(o.progress.gained)}
              <br />
              LVLS: ${o.levels.gained}`,totalStart:`EXP: ${y(o.progress.start)} <br /> LVLS: ${o.levels.start}`,totalEnd:`EXP: ${y(o.progress.end)} <br /> LVLS: ${o.levels.end}`,progressGainedClass:w(V),progressStartClass:w(o.progress.start),progressGainedClass:w(o.progress.gained),progressEndClass:w(o.progress.end)}})}catch(u){console.error("Failed to fetch competition data:",u)}finally{b.value=!1}},N=de(()=>{if(!t.value.trim())return;const r=m.value.find(u=>u.username.toLowerCase().includes(t.value.toLowerCase()));if(r){const u=m.value.findIndex(o=>o.id===r.id);if(u!==-1){const[o]=m.value.splice(u,1);m.value.unshift(o),_.value=o.id,setTimeout(()=>_.value=null,2e3)}}else e.value=!0},300),F=ne(()=>t.value.trim()?m.value.filter(r=>r.username.toLowerCase().includes(t.value.toLowerCase())):m.value),Q=r=>{p.value=r,T()};return re(T),{columns:D,filteredRows:F,searchQuery:t,highlightedId:_,debouncedSearch:N,playerNotFoundDialog:e,loading:b,updateCompetition:Q,competitionTitle:a}}},Se={class:"q-gutter-sm row items-center"},Ee=["innerHTML"],Ge=["innerHTML"],Ne=["innerHTML"],Pe=["innerHTML"],xe=["src","alt"];function Le(m,t,_,e,b,p){return S(),U(X,null,{default:s(()=>[l("div",Se,[n(te,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n(q,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:s(()=>[n(Y,null,{default:s(()=>[n(E,{clickable:"",onClick:t[1]||(t[1]=a=>e.updateCompetition(78623))},{default:s(()=>[n(G,null,{default:s(()=>t[9]||(t[9]=[k("Farming")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[2]||(t[2]=a=>e.updateCompetition(71017))},{default:s(()=>[n(G,null,{default:s(()=>t[10]||(t[10]=[k("Construction")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[3]||(t[3]=a=>e.updateCompetition(65875))},{default:s(()=>[n(G,null,{default:s(()=>t[11]||(t[11]=[k("Agility")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[4]||(t[4]=a=>e.updateCompetition(58100))},{default:s(()=>[n(G,null,{default:s(()=>t[12]||(t[12]=[k("Fishing")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[5]||(t[5]=a=>e.updateCompetition(48025))},{default:s(()=>[n(G,null,{default:s(()=>t[13]||(t[13]=[k("Crafting")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[6]||(t[6]=a=>e.updateCompetition(44571))},{default:s(()=>[n(G,null,{default:s(()=>t[14]||(t[14]=[k("Prayer")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[7]||(t[7]=a=>e.updateCompetition(39755))},{default:s(()=>[n(G,null,{default:s(()=>t[15]||(t[15]=[k("Fletching")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(le,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":s(a=>[n(M,{class:C(a.row.progressClass)},{default:s(()=>[l("div",{innerHTML:a.row.progressLevels},null,8,Ee)]),_:2},1032,["class"])]),"body-cell-gainedXP":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.gainedXP},null,8,Ge)]),_:2},1032,["class"])]),"body-cell-totalStart":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.totalStart},null,8,Ne)]),_:2},1032,["class"])]),"body-cell-totalEnd":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.totalEnd},null,8,Pe)]),_:2},1032,["class"])]),"body-cell-type":s(a=>[n(M,null,{default:s(()=>[l("img",{src:a.row.typeImage,alt:a.row.type,width:"28",height:"28"},null,8,xe)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ae,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[8]||(t[8]=a=>e.playerNotFoundDialog=a)},{default:s(()=>[n(W,null,{default:s(()=>[n(K,null,{default:s(()=>t[16]||(t[16]=[k(" Player not found. Please try a different query. ")])),_:1}),n(j,{align:"right"},{default:s(()=>[ie(n(B,{flat:"",label:"Close"},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Me=O(ke,[["render",Le]]);const Ue={setup(){const m=c=>{const y=c.getUTCFullYear(),D=String(c.getUTCMonth()+1).padStart(2,"0"),T=String(c.getUTCDate()).padStart(2,"0");return`${y}/${D}/${T}`},t=(c,y)=>{const D=[];let T=new Date(c);for(;T<=y;)D.push(m(T)),T.setUTCDate(T.getUTCDate()+1);return D},_=c=>{const y=p.value[c];return y?y.color||"white":null},p=d((c=>{const y={};return Object.keys(c).forEach(D=>{const{rangeEnd:T,...N}=c[D];t(new Date(D),new Date(T||D)).forEach(Q=>{y[Q]={...N}})}),y})({"2024/12/06":{rangeEnd:"2025/01/22",title:"Leagues V: Raging Echoes",description:"Leagues V: Raging Echoes is a temporary game mode in Old School RuneScape (OSRS) that will begin November 27, 2024.",image:"/homepage/leagues/virtus.png",color:"info"},"2024/12/31":{rangeEnd:"2024/12/31",title:"New Year's Rumble",description:"1.5B in prizes, hunters vs. hunted in PVP world at 3pm EST!",image:"/homepage/bonanza.png",color:"primary"},"2025/01/19":{rangeEnd:"2025/01/26",title:"GROUP BOSS OF THE WEEK - ZILY ",description:"BOTW will be a group competition and buyin phase will be January 12th - Jan 18th.",image:"/calendar/zily.png",color:"negative"},"2025/02/01":{rangeEnd:"2025/02/01",title:"Fashionscape Fiesta",description:"Congratulations to the winners! We plan to throw more fashionscape events in the future, perhaps with different themes?!",image:"/homepage/fashionfeb/lineup2.png",color:"pink"},"2025/02/16":{rangeEnd:"2025/03/02",title:"Skill of the Week - Farming",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/toollep.png",color:"light-green"},"2025/03/23":{rangeEnd:"2025/03/30",title:"Skill of the Week - Magic",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/magic.png",color:"blue-14"}})),a=[{startDate:new Date(Date.UTC(2024,11,6)),endDate:new Date(Date.UTC(2025,0,22))},{startDate:new Date(Date.UTC(2024,11,31)),endDate:new Date(Date.UTC(2024,11,31))},{startDate:new Date(Date.UTC(2025,0,19)),endDate:new Date(Date.UTC(2025,0,26))},{startDate:new Date(Date.UTC(2025,1,1)),endDate:new Date(Date.UTC(2025,1,1))},{startDate:new Date(Date.UTC(2025,1,16)),endDate:new Date(Date.UTC(2025,2,2))},{startDate:new Date(Date.UTC(2025,2,23)),endDate:new Date(Date.UTC(2025,2,30))}],f=d((c=>{const y=new Set;return c.forEach(({startDate:D,endDate:T})=>{t(D,T).forEach(N=>y.add(N))}),Array.from(y).sort()})(a)),w=m(new Date);return f.value.push(w),{splitterModel:d(50),date:d(w),events:f,eventDetails:p,getEventColor:_}}},Ve={class:"q-pa-md"},Ie={class:"text-h4 q-mb-md"};function Qe(m,t,_,e,b,p){return S(),A("div",null,[n(be,{modelValue:e.splitterModel,"onUpdate:modelValue":t[2]||(t[2]=a=>e.splitterModel=a),style:{height:"450px"}},{before:s(()=>[l("div",Ve,[n(ge,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=a=>e.date=a),events:e.events,"event-color":e.getEventColor},null,8,["modelValue","events","event-color"])])]),after:s(()=>[n(fe,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=a=>e.date=a),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:s(()=>[(S(!0),A(J,null,Z(e.events,a=>(S(),U(ve,{key:a,name:a},{default:s(()=>{var h,f,w;return[l("div",Ie,i(((h=e.eventDetails[a])==null?void 0:h.title)||"No Event Scheduled"),1),l("p",null,i(((f=e.eventDetails[a])==null?void 0:f.description)||"No details available, please check out other planned events by viewing dates that are highlighted on the calendar."),1),(w=e.eventDetails[a])!=null&&w.image?(S(),U(ye,{key:0,src:e.eventDetails[a].image,alt:"Event Image",style:{"max-width":"100%","max-height":"200px"}},null,8,["src"])):Te("",!0)]}),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}var Re=O(Ue,[["render",Qe],["__scopeId","data-v-183ad881"]]);const Fe=["src","alt"],He={__name:"EventButton",props:{label:{type:String,required:!0},tooltip:{type:String,required:!0},icon:{type:String,required:!0},animationClass:{type:String,required:!0},buttonClass:{type:String,default:""},active:{type:Boolean,default:!1}},emits:["click"],setup(m,{emit:t}){const _=m,e=t,b=d(null);function p(h,f){h.classList.remove(f),h.offsetWidth,h.classList.add(f)}Ce(()=>_.active,h=>{h&&b.value&&p(b.value,_.animationClass)});function a(){e("click")}return(h,f)=>(S(),U(B,{glossy:"",dense:"",stack:"",label:m.label,color:m.active?"primary":"secondary",class:C([m.buttonClass,m.active?m.animationClass:""]),onClick:a},{default:s(()=>[n(we,null,{default:s(()=>[k(i(m.tooltip),1)]),_:1}),l("img",{ref_key:"iconRef",ref:b,class:C(["event-icon",m.active?m.animationClass:""]),src:m.icon,alt:m.label},null,10,Fe)]),_:1},8,["label","color","class"]))}};var z=O(He,[["__scopeId","data-v-61fd6b16"]]);const Oe={setup(){const m="ag5idzcxq01s1yoocwth0llc",t=new Map,_=async(g,P={},x=5,L=1e3)=>{try{const v=await fetch(g,P);if(v.status===429)throw new Error("Rate limit exceeded");if(!v.ok)throw new Error(`HTTP error! Status: ${v.status}`);return v}catch(v){if(x>0)return console.warn(`Request failed: ${v.message}. Retrying in ${L}ms...`),await new Promise(H=>setTimeout(H,L)),_(g,P,x-1,L*2);throw v}},e=async(g,P={},x=5,L=1e3)=>{if(t.has(g))return console.log("Using cached data for",g),t.get(g);const H=await(await _(g,P,x,L)).text();return t.set(g,H),H},b=[{slug:"Team+Stolen+Gun",display:"Team Stolen Gun"},{slug:"Team+NOKOMIS",display:"Team NOKOMIS"},{slug:"Team+ren+vvs",display:"Team ren vvs"}],p=d(null),a=d(0),h=d(0),f=d(0),w=d(0),c=d(0),y=d(0),D=d(0),T=d(0),N=d(0),F=d(0),Q=d(0),r=d(0),u=d(0);ee(()=>{r.value=Number(f.value)+Number(w.value),u.value=Number(a.value)+Number(h.value)});const o=d(!0),R=d(3e4),V=g=>{if(!o.value){alert("Please wait 30 seconds before selecting a new team.");return}p.value=g,o.value=!1,setTimeout(()=>{o.value=!0},R.value)},me=["clue_scrolls_hard","clue_scrolls_elite","slayer","tombs_of_amascut","tombs_of_amascut_expert","hitpoints","thieving","agility","runecrafting","zalcano","smithing"],ue=pe.exports.throttle(async()=>{if(!!p.value)try{await Promise.all(me.map(async g=>{const P=`https://api.wiseoldman.net/v2/competitions/68296/csv?table=team&teamName=${p.value.slug}&metric=${g}`,x=await e(P,{headers:{Authorization:`Bearer ${m}`}}),v=_e.parse(x,{header:!0,skipEmptyLines:!0}).data.reduce((H,he)=>{const $=Number(he.Gained);return H+(isNaN($)?0:$)},0);g==="agility"&&(D.value=v),g==="slayer"&&(T.value=v),g==="clue_scrolls_hard"&&(a.value=v),g==="clue_scrolls_elite"&&(h.value=v),g==="tombs_of_amascut"&&(f.value=v),g==="tombs_of_amascut_expert"&&(w.value=v),g==="hitpoints"&&(c.value=v),g==="thieving"&&(y.value=v),g==="runecrafting"&&(N.value=v),g==="zalcano"&&(F.value=v),g==="smithing"&&(Q.value=v)}))}catch(g){console.error("Error fetching data:",g)}},5e3);return ee(()=>{p.value&&ue()}),{delayTimer:R,teams:b,selectedTeam:p,updateSelectedTeam:V,agilityGained:D,clueScrollEliteGained:h,clueScrollHardGained:a,toaGained:f,toaExpertGained:w,hitpointsGained:c,thievingGained:y,runecraftingGained:N,zalcanoGained:F,smithingGained:Q,slayerGained:T,toaTotal:r,cluesTotal:u,computePosition:(g,P)=>{const[x,,L]=P;let v=(g-x)/(L-x)*100;return Math.max(0,Math.min(100,v))},getThresholdClass:(g,P)=>{const[x,L,v]=P;return g<L?"progress-low":g<v?"progress-medium":"progress-high"},metricThresholds:{agility:[5e5,2e6,5e6],slayer:[1e6,5e6,1e7],runecrafting:[5e5,2e6,4e6],thieving:[25e5,5e6,1e7],hitpoints:[15e5,3e6,6e6],clues:[150,300,600],tombs:[150,500,1e3],zalcano:[250,500,1e3],smithing:[5e5,2e6,4e6]},formatNumber:g=>new Intl.NumberFormat().format(g)}}},ze={class:"q-gutter-sm row items-center"},Ae={class:"stats-container"},Xe={class:"stats-table"},Be={class:"stats-cell"},qe={class:"progress-cell"},We={class:"threshold-label threshold-low"},Ke={class:"threshold-label threshold-medium"},je={class:"threshold-label threshold-high"},Ye={class:"stats-cell"},Je={class:"progress-cell"},Ze={class:"threshold-label threshold-low"},$e={class:"threshold-label threshold-medium"},et={class:"threshold-label threshold-high"},tt={class:"stats-cell"},lt={class:"progress-cell"},at={class:"threshold-label threshold-low"},st={class:"threshold-label threshold-medium"},ot={class:"threshold-label threshold-high"},nt={class:"stats-cell"},rt={class:"progress-cell"},it={class:"threshold-label threshold-low"},dt={class:"threshold-label threshold-medium"},ct={class:"threshold-label threshold-high"},mt={class:"stats-cell"},ut={class:"progress-cell"},ht={class:"threshold-label threshold-low"},gt={class:"threshold-label threshold-medium"},ft={class:"threshold-label threshold-high"},vt={class:"stats-cell"},bt={class:"progress-cell"},pt={class:"threshold-label threshold-low"},_t={class:"threshold-label threshold-medium"},yt={class:"threshold-label threshold-high"},wt={class:"stats-cell"},Tt={class:"progress-cell"},Ct={class:"threshold-label threshold-low"},Dt={class:"threshold-label threshold-medium"},kt={class:"threshold-label threshold-high"},St={class:"stats-cell"},Et={class:"progress-cell"},Gt={class:"threshold-label threshold-low"},Nt={class:"threshold-label threshold-medium"},Pt={class:"threshold-label threshold-high"},xt={class:"stats-cell"},Lt={class:"progress-cell"},Mt={class:"threshold-label threshold-low"},Ut={class:"threshold-label threshold-medium"},Vt={class:"threshold-label threshold-high"};function It(m,t,_,e,b,p){return S(),U(X,{class:"page-container"},{default:s(()=>[l("div",ze,[n(q,{size:"xl",glossy:"",ripple:"",flat:"","text-color":"purple-7",outline:"",label:e.selectedTeam?e.selectedTeam.display:"Please select a Team",class:"col-auto","no-caps":""},{default:s(()=>[n(Y,null,{default:s(()=>[(S(!0),A(J,null,Z(e.teams,a=>(S(),U(E,{key:a.slug,clickable:"",onClick:h=>e.updateSelectedTeam(a)},{default:s(()=>[n(G,null,{default:s(()=>[k(i(a.display),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),t[9]||(t[9]=l("p",{style:{"text-shadow":"1px 1px 1px black"}}," Please give the tables a few seconds to to load; it uses wiseoldman to fetch live data! ",-1)),l("div",Ae,[l("table",Xe,[l("tr",null,[l("td",Be,[l("div",qe,[l("div",We,i(e.formatNumber(e.metricThresholds.agility[0])),1),l("div",Ke,i(e.formatNumber(e.metricThresholds.agility[1])),1),l("div",je,i(e.formatNumber(e.metricThresholds.agility[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.agilityGained,e.metricThresholds.agility)]),style:I({top:e.computePosition(e.agilityGained,e.metricThresholds.agility)+"%"})},i(e.formatNumber(e.agilityGained)),7)]),t[0]||(t[0]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/agility.png"})],-1))]),l("td",Ye,[l("div",Je,[l("div",Ze,i(e.formatNumber(e.metricThresholds.slayer[0])),1),l("div",$e,i(e.formatNumber(e.metricThresholds.slayer[1])),1),l("div",et,i(e.formatNumber(e.metricThresholds.slayer[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.slayerGained,e.metricThresholds.slayer)]),style:I({top:e.computePosition(e.slayerGained,e.metricThresholds.slayer)+"%"})},i(e.formatNumber(e.slayerGained)),7)]),t[1]||(t[1]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/slayer.png"})],-1))]),l("td",tt,[l("div",lt,[l("div",at,i(e.formatNumber(e.metricThresholds.runecrafting[0])),1),l("div",st,i(e.formatNumber(e.metricThresholds.runecrafting[1])),1),l("div",ot,i(e.formatNumber(e.metricThresholds.runecrafting[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.runecraftingGained,e.metricThresholds.runecrafting)]),style:I({top:e.computePosition(e.runecraftingGained,e.metricThresholds.runecrafting)+"%"})},i(e.formatNumber(e.runecraftingGained)),7)]),t[2]||(t[2]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/runecraft.png"})],-1))])]),l("tr",null,[l("td",nt,[l("div",rt,[l("div",it,i(e.formatNumber(e.metricThresholds.thieving[0])),1),l("div",dt,i(e.formatNumber(e.metricThresholds.thieving[1])),1),l("div",ct,i(e.formatNumber(e.metricThresholds.thieving[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.thievingGained,e.metricThresholds.thieving)]),style:I({top:e.computePosition(e.thievingGained,e.metricThresholds.thieving)+"%"})},i(e.formatNumber(e.thievingGained)),7)]),t[3]||(t[3]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/thieving.png"})],-1))]),l("td",mt,[l("div",ut,[l("div",ht,i(e.formatNumber(e.metricThresholds.tombs[0])),1),l("div",gt,i(e.formatNumber(e.metricThresholds.tombs[1])),1),l("div",ft,i(e.formatNumber(e.metricThresholds.tombs[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.toaTotal,e.metricThresholds.tombs)]),style:I({top:e.computePosition(e.toaTotal,e.metricThresholds.tombs)+"%"})},i(e.formatNumber(e.toaTotal)),7)]),t[4]||(t[4]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/toa.png"}),l("img",{src:"/sprites/toaexpert.png"})],-1))]),l("td",vt,[l("div",bt,[l("div",pt,i(e.formatNumber(e.metricThresholds.zalcano[0])),1),l("div",_t,i(e.formatNumber(e.metricThresholds.zalcano[1])),1),l("div",yt,i(e.formatNumber(e.metricThresholds.zalcano[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.zalcanoGained,e.metricThresholds.zalcano)]),style:I({top:e.computePosition(e.zalcanoGained,e.metricThresholds.zalcano)+"%"})},i(e.formatNumber(e.zalcanoGained)),7)]),t[5]||(t[5]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/zalcano.png"})],-1))])]),l("tr",null,[l("td",wt,[l("div",Tt,[l("div",Ct,i(e.formatNumber(e.metricThresholds.hitpoints[0])),1),l("div",Dt,i(e.formatNumber(e.metricThresholds.hitpoints[1])),1),l("div",kt,i(e.formatNumber(e.metricThresholds.hitpoints[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.hitpointsGained,e.metricThresholds.hitpoints)]),style:I({top:e.computePosition(e.hitpointsGained,e.metricThresholds.hitpoints)+"%"})},i(e.formatNumber(e.hitpointsGained)),7)]),t[6]||(t[6]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/hitpoints.png"})],-1))]),l("td",St,[l("div",Et,[l("div",Gt,i(e.formatNumber(e.metricThresholds.clues[0])),1),l("div",Nt,i(e.formatNumber(e.metricThresholds.clues[1])),1),l("div",Pt,i(e.formatNumber(e.metricThresholds.clues[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.cluesTotal,e.metricThresholds.clues)]),style:I({top:e.computePosition(e.cluesTotal,e.metricThresholds.clues)+"%"})},i(e.formatNumber(e.cluesTotal)),7)]),t[7]||(t[7]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/cluehard.png"}),l("img",{src:"/sprites/clueelite.png"})],-1))]),l("td",xt,[l("div",Lt,[l("div",Mt,i(e.formatNumber(e.metricThresholds.smithing[0])),1),l("div",Ut,i(e.formatNumber(e.metricThresholds.smithing[1])),1),l("div",Vt,i(e.formatNumber(e.metricThresholds.smithing[2])),1),l("div",{class:C(["current-value",e.getThresholdClass(e.smithingGained,e.metricThresholds.smithing)]),style:I({top:e.computePosition(e.smithingGained,e.metricThresholds.smithing)+"%"})},i(e.formatNumber(e.smithingGained)),7)]),t[8]||(t[8]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/smithing.png"})],-1))])])])])]),_:1})}var Qt=O(Oe,[["render",It],["__scopeId","data-v-6aaef330"]]);const Rt={name:"UpdatedCompetitionTable",setup(){d([]);const m=d([]),t=d(""),_=d(null),e=d(!1),b=d(!1),p=d(75869),a=d("Loading..."),h={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},f={low:"progress-low",medium:"progress-medium",high:"progress-high"},w=r=>r<50?f.none:r<300?f.low:r<600?f.medium:f.high,c=r=>r<1e6?`${(r/1e3).toFixed(4)}K`:`${(r/1e6).toFixed(2)}M`,y=r=>`${(r/1e6).toFixed(4)}M`,D=d([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(r,u)=>`<img src="${u.typeImage}" alt="${u.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(r,u)=>u.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(r,u)=>u.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),T=async()=>{b.value=!0;const r=new oe({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const u=await r.competitions.getCompetitionDetails(p.value);a.value=u.title,m.value=u.participations.map(o=>{const R=o.player.exp||0,V=o.progress.gained||0;return{id:o.player.id,username:o.player.displayName,type:o.player.type,typeImage:h[o.player.type]||h.unknown,exp:c(R),rawXp:R,lastChangedAt:ce(new Date(o.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:V,rawGainedXP:V,progressGained:c(o.progress.gained),progressStart:c(o.progress.start),progressEnd:c(o.progress.end),levelsGained:c(o.levels.gained),levelsStart:c(o.levels.start),levelsEnd:c(o.levels.end),progressLevels:`Gained: ${c(o.progress.gained)}, Start: ${c(o.progress.start)}, End: ${c(o.progress.end)}
              <br />
              Levels: Gained: ${o.levels.gained},
              Start: ${o.levels.start},
              End: ${o.levels.end}`,totalGained:`EXP: ${y(o.progress.gained)}
              <br />
              LVLS: ${o.levels.gained}`,totalStart:`${o.progress.start}`,totalEnd:`${o.progress.end}
            `,progressGainedClass:w(V),progressStartClass:w(o.progress.start),progressGainedClass:w(o.progress.gained),progressEndClass:w(o.progress.end)}})}catch(u){console.error("Failed to fetch competition data:",u)}finally{b.value=!1}},N=de(()=>{if(!t.value.trim())return;const r=m.value.find(u=>u.username.toLowerCase().includes(t.value.toLowerCase()));if(r){const u=m.value.findIndex(o=>o.id===r.id);if(u!==-1){const[o]=m.value.splice(u,1);m.value.unshift(o),_.value=o.id,setTimeout(()=>_.value=null,2e3)}}else e.value=!0},300),F=ne(()=>t.value.trim()?m.value.filter(r=>r.username.toLowerCase().includes(t.value.toLowerCase())):m.value),Q=r=>{p.value=r,T()};return re(T),{columns:D,filteredRows:F,searchQuery:t,highlightedId:_,debouncedSearch:N,playerNotFoundDialog:e,loading:b,updateCompetition:Q,competitionTitle:a}}},Ft={class:"q-gutter-sm row items-center"},Ht=["innerHTML"],Ot=["innerHTML"],zt=["innerHTML"],At=["innerHTML"],Xt=["src","alt"];function Bt(m,t,_,e,b,p){return S(),U(X,null,{default:s(()=>[l("div",Ft,[n(te,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n(q,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:s(()=>[n(Y,null,{default:s(()=>[n(E,{clickable:"",onClick:t[1]||(t[1]=a=>e.updateCompetition(75869))},{default:s(()=>[n(G,null,{default:s(()=>t[7]||(t[7]=[k("Zilyana")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[2]||(t[2]=a=>e.updateCompetition(68468))},{default:s(()=>[n(G,null,{default:s(()=>t[8]||(t[8]=[k("Duke")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[3]||(t[3]=a=>e.updateCompetition(50451))},{default:s(()=>[n(G,null,{default:s(()=>t[9]||(t[9]=[k("Zulrah")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[4]||(t[4]=a=>e.updateCompetition(46277))},{default:s(()=>[n(G,null,{default:s(()=>t[10]||(t[10]=[k("General Graardor")])),_:1})]),_:1}),n(E,{clickable:"",onClick:t[5]||(t[5]=a=>e.updateCompetition(40782))},{default:s(()=>[n(G,null,{default:s(()=>t[11]||(t[11]=[k("Scurrius")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(le,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":s(a=>[n(M,{class:C(a.row.progressClass)},{default:s(()=>[l("div",{innerHTML:a.row.progressLevels},null,8,Ht)]),_:2},1032,["class"])]),"body-cell-gainedXP":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.gainedXP},null,8,Ot)]),_:2},1032,["class"])]),"body-cell-totalStart":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.totalStart},null,8,zt)]),_:2},1032,["class"])]),"body-cell-totalEnd":s(a=>[n(M,{class:C(a.row.progressGainedClass)},{default:s(()=>[l("div",{innerHTML:a.row.totalEnd},null,8,At)]),_:2},1032,["class"])]),"body-cell-type":s(a=>[n(M,null,{default:s(()=>[l("img",{src:a.row.typeImage,alt:a.row.type,width:"28",height:"28"},null,8,Xt)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ae,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[6]||(t[6]=a=>e.playerNotFoundDialog=a)},{default:s(()=>[n(W,null,{default:s(()=>[n(K,null,{default:s(()=>t[12]||(t[12]=[k(" Player not found. Please try a different query. ")])),_:1}),n(j,{align:"right"},{default:s(()=>[ie(n(B,{flat:"",label:"Close"},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var qt=O(Rt,[["render",Bt]]);const Wt={class:"q-gutter-md row justify-center"},Kt={class:"q-mt-md"},jt={__name:"EventsPage",setup(m){const t=d([]),_={calendar:Re,competitions:Me,botw:qt,bingo:Qt};function e(a){return t.value.some(h=>h.name===a)}function b(a){e(a)?p(a):t.value.push({name:a,component:_[a]})}function p(a){t.value=t.value.filter(h=>h.name!==a)}return(a,h)=>(S(),U(X,{class:"q-pa-md"},{default:s(()=>[l("div",Wt,[n(z,{label:"Calendar",tooltip:"Calendar",icon:"/icons/calendarbook.png",animationClass:"animate__fadeInDown",buttonClass:"leagues-style",active:e("calendar"),onClick:h[0]||(h[0]=f=>b("calendar"))},null,8,["active"]),n(z,{label:"Skill of the Week",tooltip:"Skill of the Week",icon:"/icons/ARTSNEW.png",animationClass:"animate__zoomIn",buttonClass:"wild-style",active:e("competitions"),onClick:h[1]||(h[1]=f=>b("competitions"))},null,8,["active"]),n(z,{label:"Boss of the Week",tooltip:"Boss of the Week",icon:"/icons/pvm.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("botw"),onClick:h[2]||(h[2]=f=>b("botw"))},null,8,["active"]),n(z,{label:"Bingo Table",tooltip:"Bingo",icon:"/icons/clan1.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("bingo"),onClick:h[3]||(h[3]=f=>b("bingo"))},null,8,["active"])]),l("div",Kt,[(S(!0),A(J,null,Z(t.value,f=>(S(),U(W,{key:f.name,class:"q-mb-md"},{default:s(()=>[n(K,null,{default:s(()=>[(S(),U(De(f.component)))]),_:2},1024),n(j,{align:"right"},{default:s(()=>[n(B,{flat:"",label:"Close",color:"negative",onClick:w=>p(f.name)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))}};var ol=O(jt,[["__scopeId","data-v-0d9d78c6"]]);export{Me as C,ol as E,Qt as N};
