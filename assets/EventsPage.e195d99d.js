import{j as de,k as $,l as K,m as M,n as ce,g as ee,b as te,c as ae,C as me,i as j,W as ue,o as _e,p as ye,q as we,r as Te,P as he,s as Ce}from"./EventsPage.vue_vue_type_style_index_0_scoped_true_lang.a3b2c561.js";import{Q as J}from"./QBtn.31d4307f.js";import{_ as H,A as le,Q as x,p as L,w as ke,x as De}from"./QImg.3ce6edd6.js";import{r as m,f as Y,p as se,G as N,N as I,L as o,I as a,K as n,J as G,R as E,z as ge,H as z,U as Z,T as oe,M as u,O as fe,w as Ee,at as re,au as Q,S as ie,av as Se}from"./index.611b3713.js";import{d as ve,f as be}from"./debounce.4147f2b8.js";const Ne={name:"UpdatedCompetitionTable",setup(){m([]);const c=m([]),t=m(""),f=m(null),e=m(!1),b=m(!1),p=m(78623),l=m("Loading..."),i={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},g={low:"progress-low",medium:"progress-medium",high:"progress-high"},C=d=>d<1e6?g.none:d<5e6?g.low:d<1e7?g.medium:g.high,h=d=>d<1e6?`${(d/1e3).toFixed(2)}K`:`${(d/1e6).toFixed(2)}M`,y=d=>`${(d/1e6).toFixed(2)}M`,S=m([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(d,r)=>`<img src="${r.typeImage}" alt="${r.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(d,r)=>r.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(d,r)=>r.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),k=async()=>{b.value=!0;const d=new ue({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const r=await d.competitions.getCompetitionDetails(p.value);l.value=r.title,c.value=r.participations.map(s=>{const _=s.player.exp||0,D=s.progress.gained||0;return{id:s.player.id,username:s.player.displayName,type:s.player.type,typeImage:i[s.player.type]||i.unknown,exp:h(_),rawXp:_,lastChangedAt:be(new Date(s.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:h(D),rawGainedXP:D,progressGained:h(s.progress.gained),progressStart:h(s.progress.start),progressEnd:h(s.progress.end),levelsGained:h(s.levels.gained),levelsStart:h(s.levels.start),levelsEnd:h(s.levels.end),progressLevels:`Gained: ${h(s.progress.gained)}, Start: ${h(s.progress.start)}, End: ${h(s.progress.end)}
              <br />
              Levels: Gained: ${s.levels.gained},
              Start: ${s.levels.start},
              End: ${s.levels.end}`,totalGained:`EXP: ${y(s.progress.gained)}
              <br />
              LVLS: ${s.levels.gained}`,totalStart:`EXP: ${y(s.progress.start)} <br /> LVLS: ${s.levels.start}`,totalEnd:`EXP: ${y(s.progress.end)} <br /> LVLS: ${s.levels.end}`,progressGainedClass:C(D),progressStartClass:C(s.progress.start),progressGainedClass:C(s.progress.gained),progressEndClass:C(s.progress.end)}})}catch(r){console.error("Failed to fetch competition data:",r)}finally{b.value=!1}},P=ve(()=>{if(!t.value.trim())return;const d=c.value.find(r=>r.username.toLowerCase().includes(t.value.toLowerCase()));if(d){const r=c.value.findIndex(s=>s.id===d.id);if(r!==-1){const[s]=c.value.splice(r,1);c.value.unshift(s),f.value=s.id,setTimeout(()=>f.value=null,2e3)}}else e.value=!0},300),V=Y(()=>t.value.trim()?c.value.filter(d=>d.username.toLowerCase().includes(t.value.toLowerCase())):c.value),O=d=>{p.value=d,k()};return se(k),{columns:S,filteredRows:V,searchQuery:t,highlightedId:f,debouncedSearch:P,playerNotFoundDialog:e,loading:b,updateCompetition:O,competitionTitle:l}}},Ge={class:"q-gutter-sm row items-center"},Pe=["innerHTML"],xe=["innerHTML"],Le=["innerHTML"],Ue=["innerHTML"],Me=["src","alt"];function Ie(c,t,f,e,b,p){return N(),I(j,null,{default:o(()=>[a("div",Ge,[n(de,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchQuery=l),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n($,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:o(()=>[n(le,null,{default:o(()=>[n(x,{clickable:"",onClick:t[1]||(t[1]=l=>e.updateCompetition(78623))},{default:o(()=>[n(L,null,{default:o(()=>t[9]||(t[9]=[G("Farming")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[2]||(t[2]=l=>e.updateCompetition(71017))},{default:o(()=>[n(L,null,{default:o(()=>t[10]||(t[10]=[G("Construction")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[3]||(t[3]=l=>e.updateCompetition(65875))},{default:o(()=>[n(L,null,{default:o(()=>t[11]||(t[11]=[G("Agility")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[4]||(t[4]=l=>e.updateCompetition(58100))},{default:o(()=>[n(L,null,{default:o(()=>t[12]||(t[12]=[G("Fishing")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[5]||(t[5]=l=>e.updateCompetition(48025))},{default:o(()=>[n(L,null,{default:o(()=>t[13]||(t[13]=[G("Crafting")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[6]||(t[6]=l=>e.updateCompetition(44571))},{default:o(()=>[n(L,null,{default:o(()=>t[14]||(t[14]=[G("Prayer")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[7]||(t[7]=l=>e.updateCompetition(39755))},{default:o(()=>[n(L,null,{default:o(()=>t[15]||(t[15]=[G("Fletching")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(K,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":o(l=>[n(M,{class:E(l.row.progressClass)},{default:o(()=>[a("div",{innerHTML:l.row.progressLevels},null,8,Pe)]),_:2},1032,["class"])]),"body-cell-gainedXP":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.gainedXP},null,8,xe)]),_:2},1032,["class"])]),"body-cell-totalStart":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.totalStart},null,8,Le)]),_:2},1032,["class"])]),"body-cell-totalEnd":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.totalEnd},null,8,Ue)]),_:2},1032,["class"])]),"body-cell-type":o(l=>[n(M,null,{default:o(()=>[a("img",{src:l.row.typeImage,alt:l.row.type,width:"28",height:"28"},null,8,Me)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ce,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[8]||(t[8]=l=>e.playerNotFoundDialog=l)},{default:o(()=>[n(ee,null,{default:o(()=>[n(te,null,{default:o(()=>t[16]||(t[16]=[G(" Player not found. Please try a different query. ")])),_:1}),n(ae,{align:"right"},{default:o(()=>[ge(n(J,{flat:"",label:"Close"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ve=H(Ne,[["render",Ie]]);const Oe={setup(){const c=h=>{const y=h.getUTCFullYear(),S=String(h.getUTCMonth()+1).padStart(2,"0"),k=String(h.getUTCDate()).padStart(2,"0");return`${y}/${S}/${k}`},t=(h,y)=>{const S=[];let k=new Date(h);for(;k<=y;)S.push(c(k)),k.setUTCDate(k.getUTCDate()+1);return S},f=h=>{const y=p.value[h];return y?y.color||"white":null},p=m((h=>{const y={};return Object.keys(h).forEach(S=>{const{rangeEnd:k,...P}=h[S];t(new Date(S),new Date(k||S)).forEach(O=>{y[O]={...P}})}),y})({"2024/12/06":{rangeEnd:"2025/01/22",title:"Leagues V: Raging Echoes",description:"Leagues V: Raging Echoes is a temporary game mode in Old School RuneScape (OSRS) that will begin November 27, 2024.",image:"/homepage/leagues/virtus.png",color:"info"},"2024/12/31":{rangeEnd:"2024/12/31",title:"New Year's Rumble",description:"1.5B in prizes, hunters vs. hunted in PVP world at 3pm EST!",image:"/homepage/bonanza.png",color:"primary"},"2025/01/19":{rangeEnd:"2025/01/26",title:"GROUP BOSS OF THE WEEK - ZILY ",description:"BOTW will be a group competition and buyin phase will be January 12th - Jan 18th.",image:"/calendar/zily.png",color:"negative"},"2025/02/01":{rangeEnd:"2025/02/01",title:"Fashionscape Fiesta",description:"Congratulations to the winners! We plan to throw more fashionscape events in the future, perhaps with different themes?!",image:"/homepage/fashionfeb/lineup2.png",color:"pink"},"2025/02/16":{rangeEnd:"2025/03/02",title:"Skill of the Week - Farming",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/toollep.png",color:"light-green"},"2025/03/23":{rangeEnd:"2025/03/30",title:"Skill of the Week - Magic",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/magic.png",color:"blue-14"}})),l=[{startDate:new Date(Date.UTC(2024,11,6)),endDate:new Date(Date.UTC(2025,0,22))},{startDate:new Date(Date.UTC(2024,11,31)),endDate:new Date(Date.UTC(2024,11,31))},{startDate:new Date(Date.UTC(2025,0,19)),endDate:new Date(Date.UTC(2025,0,26))},{startDate:new Date(Date.UTC(2025,1,1)),endDate:new Date(Date.UTC(2025,1,1))},{startDate:new Date(Date.UTC(2025,1,16)),endDate:new Date(Date.UTC(2025,2,2))},{startDate:new Date(Date.UTC(2025,2,23)),endDate:new Date(Date.UTC(2025,2,30))}],g=m((h=>{const y=new Set;return h.forEach(({startDate:S,endDate:k})=>{t(S,k).forEach(P=>y.add(P))}),Array.from(y).sort()})(l)),C=c(new Date);return g.value.push(C),{splitterModel:m(50),date:m(C),events:g,eventDetails:p,getEventColor:f}}},Fe={class:"q-pa-md"},Re={class:"text-h4 q-mb-md"};function Be(c,t,f,e,b,p){return N(),z("div",null,[n(Te,{modelValue:e.splitterModel,"onUpdate:modelValue":t[2]||(t[2]=l=>e.splitterModel=l),style:{height:"450px"}},{before:o(()=>[a("div",Fe,[n(_e,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=l=>e.date=l),events:e.events,"event-color":e.getEventColor},null,8,["modelValue","events","event-color"])])]),after:o(()=>[n(ye,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=l=>e.date=l),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:o(()=>[(N(!0),z(Z,null,oe(e.events,l=>(N(),I(we,{key:l,name:l},{default:o(()=>{var i,g,C;return[a("div",Re,u(((i=e.eventDetails[l])==null?void 0:i.title)||"No Event Scheduled"),1),a("p",null,u(((g=e.eventDetails[l])==null?void 0:g.description)||"No details available, please check out other planned events by viewing dates that are highlighted on the calendar."),1),(C=e.eventDetails[l])!=null&&C.image?(N(),I(ke,{key:0,src:e.eventDetails[l].image,alt:"Event Image",style:{"max-width":"100%","max-height":"200px"}},null,8,["src"])):fe("",!0)]}),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}var He=H(Oe,[["render",Be],["__scopeId","data-v-183ad881"]]);const Qe={name:"TeamLeaderboard",setup(){const c=m([]),t=m(!0),f=m({}),e="ag5idzcxq01s1yoocwth0llc",b={low:"progress-low",medium:"progress-medium",high:"progress-high"},p=r=>r<5e5?b.low:r<2e6?b.medium:b.high,l=m([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"team",label:"Team",align:"left",field:"team",sortable:!0},{name:"lastUpdated",label:"Last Updated",align:"center",field:"lastUpdated",sortable:!0}]),i=["clue_scrolls_hard","slayer","tombs_of_amascut","tombs_of_amascut_expert","zalcano","smithing","hitpoints","clue_scrolls_elite","thieving","agility","runecrafting"],g={},C=5*60*1e3,h=r=>new Promise(s=>setTimeout(s,r)),y=async(r,s={},_=3,D=1e3)=>{try{const w=await fetch(r,s);if(!w.ok)if(w.status===429||w.status>=500&&w.status<600){if(_>0)return console.warn(`Request failed with status ${w.status}. Retrying in ${D}ms...`),await h(D),y(r,s,_-1,D*2);throw new Error(`Request failed with status ${w.status} after retries.`)}else throw new Error(`Request failed with status ${w.status}.`);return w}catch(w){if(_>0)return console.warn(`Fetch error: ${w.message}. Retrying in ${D}ms...`),await h(D),y(r,s,_-1,D*2);throw w}},S=async r=>{const s=`https://api.wiseoldman.net/v2/competitions/68296/csv?metric=${r}`,_=r,D=Date.now();if(g[_]&&D-g[_].timestamp<C)return console.log(`Using cached data for metric: ${r}`),g[_].data;const U=await(await y(s,{headers:{Authorization:`Bearer ${e}`}})).text();return g[_]={timestamp:D,data:U},U},k=async()=>{t.value=!0;try{const r={};f.value={};for(const s of i)try{const _=await S(s);he.parse(_,{header:!0,skipEmptyLines:!0}).data.forEach(w=>{const U=w.Username,A=w.Team||"Unknown",X=parseInt(w.Gained)||0;r[U]||(r[U]={id:U,username:U,team:A,rank:parseInt(w.Rank),lastUpdated:w["Last Updated"]}),r[U][s]=X,r[U][`${s}Formatted`]=V(X),r[U][`${s}Class`]=p(X),f.value[A]||(f.value[A]={}),f.value[A][s]=(f.value[A][s]||0)+X}),l.value.find(w=>w.name===s)||l.value.push({name:s,label:s.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),align:"right",field:s,sortable:!0})}catch(_){console.error(`Error fetching metric ${s}:`,_)}c.value=Object.values(r)}catch(r){console.error("Error fetching metrics:",r)}finally{t.value=!1}},P=r=>new Intl.NumberFormat().format(r),V=r=>r>0?`+${P(r)}`:P(r),O=Y(()=>Object.entries(f.value).map(([r,s])=>({team:r,...s,...Object.fromEntries(Object.keys(s).map(_=>[`${_}Formatted`,V(s[_])]))}))),d=Y(()=>{const r=Object.keys(f.value).length?Object.keys(f.value[Object.keys(f.value)[0]]||{}).map(s=>({name:s,label:s.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase()),align:"right",field:s,sortable:!0})):[];return[{name:"team",label:"Team",align:"left",field:"team",sortable:!0},...r]});return se(k),{tableData:c,columns:l,loading:t,formatNumber:P,teamsGained:f,teamTableData:O,teamColumns:d}}};function ze(c,t,f,e,b,p){return N(),I(j,null,{default:o(()=>[n(K,{rows:e.tableData,columns:e.columns,"row-key":"username",loading:e.loading,"rows-per-page-options":[5,10,20,-1],class:"team-table",title:"Player Stats"},{"body-cell":o(({row:l,col:i})=>[n(M,{class:E(l[`${i.name}Class`])},{default:o(()=>[G(u(i.name==="rank"||i.name==="username"||i.name==="team"||i.name==="lastUpdated"?l[i.field]:l[`${i.name}Formatted`]||e.formatNumber(l[i.field]||0)),1)]),_:2},1032,["class"])]),_:1},8,["rows","columns","loading"]),Object.keys(e.teamsGained).length?(N(),I(K,{key:0,rows:e.teamTableData,columns:e.teamColumns,"row-key":"team",class:"team-table",title:"Team Stats"},{"body-cell":o(({row:l,col:i})=>[n(M,null,{default:o(()=>[G(u(i.name==="team"?l.team:l[`${i.name}Formatted`]||e.formatNumber(l[i.name]||0)),1)]),_:2},1024)]),_:1},8,["rows","columns"])):fe("",!0)]),_:1})}var Ae=H(Qe,[["render",ze],["__scopeId","data-v-d9253876"]]);const qe=["src","alt"],We={__name:"EventButton",props:{label:{type:String,required:!0},tooltip:{type:String,required:!0},icon:{type:String,required:!0},animationClass:{type:String,required:!0},buttonClass:{type:String,default:""},active:{type:Boolean,default:!1}},emits:["click"],setup(c,{emit:t}){const f=c,e=t,b=m(null);function p(i,g){i.classList.remove(g),i.offsetWidth,i.classList.add(g)}Ee(()=>f.active,i=>{i&&b.value&&p(b.value,f.animationClass)});function l(){e("click")}return(i,g)=>(N(),I(J,{glossy:"",dense:"",stack:"",label:c.label,color:c.active?"primary":"secondary",class:E([c.buttonClass,c.active?c.animationClass:""]),onClick:l},{default:o(()=>[n(De,null,{default:o(()=>[G(u(c.tooltip),1)]),_:1}),a("img",{ref_key:"iconRef",ref:b,class:E(["event-icon",c.active?c.animationClass:""]),src:c.icon,alt:c.label},null,10,qe)]),_:1},8,["label","color","class"]))}};var W=H(We,[["__scopeId","data-v-61fd6b16"]]);const Xe={setup(){const c="ag5idzcxq01s1yoocwth0llc",t=new Map,f=async(v,F={},R=5,B=1e3)=>{try{const T=await fetch(v,F);if(T.status===429)throw new Error("Rate limit exceeded");if(!T.ok)throw new Error(`HTTP error! Status: ${T.status}`);return T}catch(T){if(R>0)return console.warn(`Request failed: ${T.message}. Retrying in ${B}ms...`),await new Promise(q=>setTimeout(q,B)),f(v,F,R-1,B*2);throw T}},e=async(v,F={},R=5,B=1e3)=>{if(t.has(v))return console.log("Using cached data for",v),t.get(v);const q=await(await f(v,F,R,B)).text();return t.set(v,q),q},b=[{slug:"Team+Stolen+Gun",display:"Team Stolen Gun"},{slug:"Team+NOKOMIS",display:"Team NOKOMIS"},{slug:"Team+ren+vvs",display:"Team ren vvs"}],p=m(null),l=m(0),i=m(0),g=m(0),C=m(0),h=m(0),y=m(0),S=m(0),k=m(0),P=m(0),V=m(0),O=m(0),d=m(0),r=m(0);re(()=>{d.value=Number(g.value)+Number(C.value),r.value=Number(l.value)+Number(i.value)});const s=m(!0),_=m(3e4),D=v=>{if(!s.value){alert("Please wait 30 seconds before selecting a new team.");return}p.value=v,s.value=!1,setTimeout(()=>{s.value=!0},_.value)},w=["clue_scrolls_hard","clue_scrolls_elite","slayer","tombs_of_amascut","tombs_of_amascut_expert","hitpoints","thieving","agility","runecrafting","zalcano","smithing"],U=Ce.exports.throttle(async()=>{if(!!p.value)try{await Promise.all(w.map(async v=>{const F=`https://api.wiseoldman.net/v2/competitions/68296/csv?table=team&teamName=${p.value.slug}&metric=${v}`,R=await e(F,{headers:{Authorization:`Bearer ${c}`}}),T=he.parse(R,{header:!0,skipEmptyLines:!0}).data.reduce((q,pe)=>{const ne=Number(pe.Gained);return q+(isNaN(ne)?0:ne)},0);v==="agility"&&(S.value=T),v==="slayer"&&(k.value=T),v==="clue_scrolls_hard"&&(l.value=T),v==="clue_scrolls_elite"&&(i.value=T),v==="tombs_of_amascut"&&(g.value=T),v==="tombs_of_amascut_expert"&&(C.value=T),v==="hitpoints"&&(h.value=T),v==="thieving"&&(y.value=T),v==="runecrafting"&&(P.value=T),v==="zalcano"&&(V.value=T),v==="smithing"&&(O.value=T)}))}catch(v){console.error("Error fetching data:",v)}},5e3);return re(()=>{p.value&&U()}),{delayTimer:_,teams:b,selectedTeam:p,updateSelectedTeam:D,agilityGained:S,clueScrollEliteGained:i,clueScrollHardGained:l,toaGained:g,toaExpertGained:C,hitpointsGained:h,thievingGained:y,runecraftingGained:P,zalcanoGained:V,smithingGained:O,slayerGained:k,toaTotal:d,cluesTotal:r,computePosition:(v,F)=>{const[R,,B]=F;let T=(v-R)/(B-R)*100;return Math.max(0,Math.min(100,T))},getThresholdClass:(v,F)=>{const[R,B,T]=F;return v<B?"progress-low":v<T?"progress-medium":"progress-high"},metricThresholds:{agility:[5e5,2e6,5e6],slayer:[1e6,5e6,1e7],runecrafting:[5e5,2e6,4e6],thieving:[25e5,5e6,1e7],hitpoints:[15e5,3e6,6e6],clues:[150,300,600],tombs:[150,500,1e3],zalcano:[250,500,1e3],smithing:[5e5,2e6,4e6]},formatNumber:v=>new Intl.NumberFormat().format(v)}}},je={class:"q-gutter-sm row items-center"},Ke={class:"stats-container"},Ye={class:"stats-table"},Je={class:"stats-cell"},Ze={class:"progress-cell"},$e={class:"threshold-label threshold-low"},et={class:"threshold-label threshold-medium"},tt={class:"threshold-label threshold-high"},at={class:"stats-cell"},lt={class:"progress-cell"},st={class:"threshold-label threshold-low"},ot={class:"threshold-label threshold-medium"},nt={class:"threshold-label threshold-high"},rt={class:"stats-cell"},it={class:"progress-cell"},dt={class:"threshold-label threshold-low"},ct={class:"threshold-label threshold-medium"},mt={class:"threshold-label threshold-high"},ut={class:"stats-cell"},ht={class:"progress-cell"},gt={class:"threshold-label threshold-low"},ft={class:"threshold-label threshold-medium"},vt={class:"threshold-label threshold-high"},bt={class:"stats-cell"},pt={class:"progress-cell"},_t={class:"threshold-label threshold-low"},yt={class:"threshold-label threshold-medium"},wt={class:"threshold-label threshold-high"},Tt={class:"stats-cell"},Ct={class:"progress-cell"},kt={class:"threshold-label threshold-low"},Dt={class:"threshold-label threshold-medium"},Et={class:"threshold-label threshold-high"},St={class:"stats-cell"},Nt={class:"progress-cell"},Gt={class:"threshold-label threshold-low"},Pt={class:"threshold-label threshold-medium"},xt={class:"threshold-label threshold-high"},Lt={class:"stats-cell"},Ut={class:"progress-cell"},Mt={class:"threshold-label threshold-low"},It={class:"threshold-label threshold-medium"},Vt={class:"threshold-label threshold-high"},Ot={class:"stats-cell"},Ft={class:"progress-cell"},Rt={class:"threshold-label threshold-low"},Bt={class:"threshold-label threshold-medium"},Ht={class:"threshold-label threshold-high"};function Qt(c,t,f,e,b,p){return N(),I(j,{class:"page-container"},{default:o(()=>[a("div",je,[n($,{size:"xl",glossy:"",ripple:"",flat:"","text-color":"purple-7",outline:"",label:e.selectedTeam?e.selectedTeam.display:"Please select a Team",class:"col-auto","no-caps":""},{default:o(()=>[n(le,null,{default:o(()=>[(N(!0),z(Z,null,oe(e.teams,l=>(N(),I(x,{key:l.slug,clickable:"",onClick:i=>e.updateSelectedTeam(l)},{default:o(()=>[n(L,null,{default:o(()=>[G(u(l.display),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),t[9]||(t[9]=a("p",{style:{"text-shadow":"1px 1px 1px black"}}," Please give the tables a few seconds to to load; it uses wiseoldman to fetch live data! ",-1)),a("div",Ke,[a("table",Ye,[a("tr",null,[a("td",Je,[a("div",Ze,[a("div",$e,u(e.formatNumber(e.metricThresholds.agility[0])),1),a("div",et,u(e.formatNumber(e.metricThresholds.agility[1])),1),a("div",tt,u(e.formatNumber(e.metricThresholds.agility[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.agilityGained,e.metricThresholds.agility)]),style:Q({top:e.computePosition(e.agilityGained,e.metricThresholds.agility)+"%"})},u(e.formatNumber(e.agilityGained)),7)]),t[0]||(t[0]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/agility.png"})],-1))]),a("td",at,[a("div",lt,[a("div",st,u(e.formatNumber(e.metricThresholds.slayer[0])),1),a("div",ot,u(e.formatNumber(e.metricThresholds.slayer[1])),1),a("div",nt,u(e.formatNumber(e.metricThresholds.slayer[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.slayerGained,e.metricThresholds.slayer)]),style:Q({top:e.computePosition(e.slayerGained,e.metricThresholds.slayer)+"%"})},u(e.formatNumber(e.slayerGained)),7)]),t[1]||(t[1]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/slayer.png"})],-1))]),a("td",rt,[a("div",it,[a("div",dt,u(e.formatNumber(e.metricThresholds.runecrafting[0])),1),a("div",ct,u(e.formatNumber(e.metricThresholds.runecrafting[1])),1),a("div",mt,u(e.formatNumber(e.metricThresholds.runecrafting[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.runecraftingGained,e.metricThresholds.runecrafting)]),style:Q({top:e.computePosition(e.runecraftingGained,e.metricThresholds.runecrafting)+"%"})},u(e.formatNumber(e.runecraftingGained)),7)]),t[2]||(t[2]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/runecraft.png"})],-1))])]),a("tr",null,[a("td",ut,[a("div",ht,[a("div",gt,u(e.formatNumber(e.metricThresholds.thieving[0])),1),a("div",ft,u(e.formatNumber(e.metricThresholds.thieving[1])),1),a("div",vt,u(e.formatNumber(e.metricThresholds.thieving[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.thievingGained,e.metricThresholds.thieving)]),style:Q({top:e.computePosition(e.thievingGained,e.metricThresholds.thieving)+"%"})},u(e.formatNumber(e.thievingGained)),7)]),t[3]||(t[3]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/thieving.png"})],-1))]),a("td",bt,[a("div",pt,[a("div",_t,u(e.formatNumber(e.metricThresholds.tombs[0])),1),a("div",yt,u(e.formatNumber(e.metricThresholds.tombs[1])),1),a("div",wt,u(e.formatNumber(e.metricThresholds.tombs[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.toaTotal,e.metricThresholds.tombs)]),style:Q({top:e.computePosition(e.toaTotal,e.metricThresholds.tombs)+"%"})},u(e.formatNumber(e.toaTotal)),7)]),t[4]||(t[4]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/toa.png"}),a("img",{src:"/sprites/toaexpert.png"})],-1))]),a("td",Tt,[a("div",Ct,[a("div",kt,u(e.formatNumber(e.metricThresholds.zalcano[0])),1),a("div",Dt,u(e.formatNumber(e.metricThresholds.zalcano[1])),1),a("div",Et,u(e.formatNumber(e.metricThresholds.zalcano[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.zalcanoGained,e.metricThresholds.zalcano)]),style:Q({top:e.computePosition(e.zalcanoGained,e.metricThresholds.zalcano)+"%"})},u(e.formatNumber(e.zalcanoGained)),7)]),t[5]||(t[5]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/zalcano.png"})],-1))])]),a("tr",null,[a("td",St,[a("div",Nt,[a("div",Gt,u(e.formatNumber(e.metricThresholds.hitpoints[0])),1),a("div",Pt,u(e.formatNumber(e.metricThresholds.hitpoints[1])),1),a("div",xt,u(e.formatNumber(e.metricThresholds.hitpoints[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.hitpointsGained,e.metricThresholds.hitpoints)]),style:Q({top:e.computePosition(e.hitpointsGained,e.metricThresholds.hitpoints)+"%"})},u(e.formatNumber(e.hitpointsGained)),7)]),t[6]||(t[6]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/hitpoints.png"})],-1))]),a("td",Lt,[a("div",Ut,[a("div",Mt,u(e.formatNumber(e.metricThresholds.clues[0])),1),a("div",It,u(e.formatNumber(e.metricThresholds.clues[1])),1),a("div",Vt,u(e.formatNumber(e.metricThresholds.clues[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.cluesTotal,e.metricThresholds.clues)]),style:Q({top:e.computePosition(e.cluesTotal,e.metricThresholds.clues)+"%"})},u(e.formatNumber(e.cluesTotal)),7)]),t[7]||(t[7]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/cluehard.png"}),a("img",{src:"/sprites/clueelite.png"})],-1))]),a("td",Ot,[a("div",Ft,[a("div",Rt,u(e.formatNumber(e.metricThresholds.smithing[0])),1),a("div",Bt,u(e.formatNumber(e.metricThresholds.smithing[1])),1),a("div",Ht,u(e.formatNumber(e.metricThresholds.smithing[2])),1),a("div",{class:E(["current-value",e.getThresholdClass(e.smithingGained,e.metricThresholds.smithing)]),style:Q({top:e.computePosition(e.smithingGained,e.metricThresholds.smithing)+"%"})},u(e.formatNumber(e.smithingGained)),7)]),t[8]||(t[8]=a("div",{class:"metric-label"},[a("img",{src:"/sprites/smithing.png"})],-1))])])])])]),_:1})}var zt=H(Xe,[["render",Qt],["__scopeId","data-v-6aaef330"]]);const At={name:"UpdatedCompetitionTable",setup(){m([]);const c=m([]),t=m(""),f=m(null),e=m(!1),b=m(!1),p=m(75869),l=m("Loading..."),i={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},g={low:"progress-low",medium:"progress-medium",high:"progress-high"},C=d=>d<50?g.none:d<300?g.low:d<600?g.medium:g.high,h=d=>d<1e6?`${(d/1e3).toFixed(4)}K`:`${(d/1e6).toFixed(2)}M`,y=d=>`${(d/1e6).toFixed(4)}M`,S=m([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(d,r)=>`<img src="${r.typeImage}" alt="${r.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(d,r)=>r.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(d,r)=>r.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),k=async()=>{b.value=!0;const d=new ue({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const r=await d.competitions.getCompetitionDetails(p.value);l.value=r.title,c.value=r.participations.map(s=>{const _=s.player.exp||0,D=s.progress.gained||0;return{id:s.player.id,username:s.player.displayName,type:s.player.type,typeImage:i[s.player.type]||i.unknown,exp:h(_),rawXp:_,lastChangedAt:be(new Date(s.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:D,rawGainedXP:D,progressGained:h(s.progress.gained),progressStart:h(s.progress.start),progressEnd:h(s.progress.end),levelsGained:h(s.levels.gained),levelsStart:h(s.levels.start),levelsEnd:h(s.levels.end),progressLevels:`Gained: ${h(s.progress.gained)}, Start: ${h(s.progress.start)}, End: ${h(s.progress.end)}
              <br />
              Levels: Gained: ${s.levels.gained},
              Start: ${s.levels.start},
              End: ${s.levels.end}`,totalGained:`EXP: ${y(s.progress.gained)}
              <br />
              LVLS: ${s.levels.gained}`,totalStart:`${s.progress.start}`,totalEnd:`${s.progress.end}
            `,progressGainedClass:C(D),progressStartClass:C(s.progress.start),progressGainedClass:C(s.progress.gained),progressEndClass:C(s.progress.end)}})}catch(r){console.error("Failed to fetch competition data:",r)}finally{b.value=!1}},P=ve(()=>{if(!t.value.trim())return;const d=c.value.find(r=>r.username.toLowerCase().includes(t.value.toLowerCase()));if(d){const r=c.value.findIndex(s=>s.id===d.id);if(r!==-1){const[s]=c.value.splice(r,1);c.value.unshift(s),f.value=s.id,setTimeout(()=>f.value=null,2e3)}}else e.value=!0},300),V=Y(()=>t.value.trim()?c.value.filter(d=>d.username.toLowerCase().includes(t.value.toLowerCase())):c.value),O=d=>{p.value=d,k()};return se(k),{columns:S,filteredRows:V,searchQuery:t,highlightedId:f,debouncedSearch:P,playerNotFoundDialog:e,loading:b,updateCompetition:O,competitionTitle:l}}},qt={class:"q-gutter-sm row items-center"},Wt=["innerHTML"],Xt=["innerHTML"],jt=["innerHTML"],Kt=["innerHTML"],Yt=["src","alt"];function Jt(c,t,f,e,b,p){return N(),I(j,null,{default:o(()=>[a("div",qt,[n(de,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchQuery=l),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n($,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:o(()=>[n(le,null,{default:o(()=>[n(x,{clickable:"",onClick:t[1]||(t[1]=l=>e.updateCompetition(75869))},{default:o(()=>[n(L,null,{default:o(()=>t[7]||(t[7]=[G("Zilyana")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[2]||(t[2]=l=>e.updateCompetition(68468))},{default:o(()=>[n(L,null,{default:o(()=>t[8]||(t[8]=[G("Duke")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[3]||(t[3]=l=>e.updateCompetition(50451))},{default:o(()=>[n(L,null,{default:o(()=>t[9]||(t[9]=[G("Zulrah")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[4]||(t[4]=l=>e.updateCompetition(46277))},{default:o(()=>[n(L,null,{default:o(()=>t[10]||(t[10]=[G("General Graardor")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[5]||(t[5]=l=>e.updateCompetition(40782))},{default:o(()=>[n(L,null,{default:o(()=>t[11]||(t[11]=[G("Scurrius")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(K,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":o(l=>[n(M,{class:E(l.row.progressClass)},{default:o(()=>[a("div",{innerHTML:l.row.progressLevels},null,8,Wt)]),_:2},1032,["class"])]),"body-cell-gainedXP":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.gainedXP},null,8,Xt)]),_:2},1032,["class"])]),"body-cell-totalStart":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.totalStart},null,8,jt)]),_:2},1032,["class"])]),"body-cell-totalEnd":o(l=>[n(M,{class:E(l.row.progressGainedClass)},{default:o(()=>[a("div",{innerHTML:l.row.totalEnd},null,8,Kt)]),_:2},1032,["class"])]),"body-cell-type":o(l=>[n(M,null,{default:o(()=>[a("img",{src:l.row.typeImage,alt:l.row.type,width:"28",height:"28"},null,8,Yt)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ce,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[6]||(t[6]=l=>e.playerNotFoundDialog=l)},{default:o(()=>[n(ee,null,{default:o(()=>[n(te,null,{default:o(()=>t[12]||(t[12]=[G(" Player not found. Please try a different query. ")])),_:1}),n(ae,{align:"right"},{default:o(()=>[ge(n(J,{flat:"",label:"Close"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Zt=H(At,[["render",Jt]]);const $t={name:"BingoWrapper",components:{NewBingoTest:zt,BingoTable2:Ae}};function ea(c,t,f,e,b,p){const l=ie("NewBingoTest"),i=ie("BingoTable2");return N(),z("div",null,[n(l),n(i)])}var ta=H($t,[["render",ea],["__scopeId","data-v-36b0257e"]]);const aa={};function la(c,t){return N(),z("div",null,t[0]||(t[0]=[a("h4",{style:{"text-align":"center"}},"Pet of the Month",-1),a("div",null,[a("p",null,"Pet 1"),a("img",{src:""})],-1),a("div",null,[a("p",null,"Pet 2"),a("img",{src:""})],-1)]))}var sa=H(aa,[["render",la]]);const oa={};function na(c,t){return N(),z(Z,null,[t[0]||(t[0]=a("div",null,[a("h4",{style:{"text-align":"center"}},"Hall of Fame")],-1)),t[1]||(t[1]=a("div",null,[a("p",null,"SOTW")],-1))],64)}var ra=H(oa,[["render",na]]);const ia={class:"q-gutter-md row justify-center"},da={class:"q-mt-md"},ca={__name:"EventsPage",setup(c){const t=m([]),f={calendar:He,competitions:Ve,botw:Zt,bingo:ta,potm:sa,hof:ra};function e(l){return t.value.some(i=>i.name===l)}function b(l){e(l)?p(l):t.value.push({name:l,component:f[l]})}function p(l){t.value=t.value.filter(i=>i.name!==l)}return(l,i)=>(N(),I(j,{class:"q-pa-md"},{default:o(()=>[a("div",ia,[n(W,{label:"Calendar",tooltip:"Calendar",icon:"/icons/calendarbook.png",animationClass:"animate__fadeInDown",buttonClass:"leagues-style",active:e("calendar"),onClick:i[0]||(i[0]=g=>b("calendar"))},null,8,["active"]),n(W,{label:"Skill of the Week",tooltip:"Skill of the Week",icon:"/icons/ARTSNEW.png",animationClass:"animate__zoomIn",buttonClass:"wild-style",active:e("competitions"),onClick:i[1]||(i[1]=g=>b("competitions"))},null,8,["active"]),n(W,{label:"Boss of the Week",tooltip:"Boss of the Week",icon:"/icons/pvm.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("botw"),onClick:i[2]||(i[2]=g=>b("botw"))},null,8,["active"]),n(W,{label:"Bingo Table",tooltip:"Bingo",icon:"/icons/clan1.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("bingo"),onClick:i[3]||(i[3]=g=>b("bingo"))},null,8,["active"]),n(W,{label:"Pet of the Month",tooltip:"POTM",icon:"/icons/clan1.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("potm"),onClick:i[4]||(i[4]=g=>b("potm"))},null,8,["active"]),n(W,{label:"Hall of Fame",tooltip:"Hall of Fame",icon:"/icons/pvm.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("hof"),onClick:i[5]||(i[5]=g=>b("hof"))},null,8,["active"])]),a("div",da,[(N(!0),z(Z,null,oe(t.value,g=>(N(),I(ee,{key:g.name,class:"q-mb-md"},{default:o(()=>[n(te,null,{default:o(()=>[(N(),I(Se(g.component)))]),_:2},1024),n(ae,{align:"right"},{default:o(()=>[n(J,{flat:"",label:"Close",color:"negative",onClick:C=>p(g.name)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))}};var pa=H(ca,[["__scopeId","data-v-2e3aa57d"]]);export{Ae as B,Ve as C,pa as E,zt as N};
