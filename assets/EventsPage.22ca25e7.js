import{j as de,k as Z,l as K,m as I,n as ce,g as $,b as ee,c as te,C as me,i as W,W as ue,o as _e,p as ye,q as we,r as Te,P as he,s as Ce}from"./EventsPage.vue_vue_type_style_index_0_scoped_true_lang.da644bd1.js";import{Q as J}from"./QBtn.5a7844c9.js";import{_ as z,A as ae,Q as x,p as L,w as De,x as ke}from"./QImg.6ef694b9.js";import{r as c,f as Y,p as le,G,N as M,L as o,I as l,K as n,J as N,R as E,z as ge,H as X,U as se,T as oe,M as u,O as fe,w as Ee,at as re,au as Q,S as ie,av as Se}from"./index.29b59f09.js";import{d as ve,f as be}from"./debounce.fa8c0097.js";const Ne={name:"UpdatedCompetitionTable",setup(){c([]);const m=c([]),t=c(""),f=c(null),e=c(!1),b=c(!1),p=c(78623),a=c("Loading..."),i={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},g={low:"progress-low",medium:"progress-medium",high:"progress-high"},C=d=>d<5e5?g.none:d<15e5?g.low:d<3e6?g.medium:g.high,h=d=>d<1e6?`${(d/1e3).toFixed(2)}K`:`${(d/1e6).toFixed(2)}M`,y=d=>`${(d/1e6).toFixed(2)}M`,S=c([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(d,r)=>`<img src="${r.typeImage}" alt="${r.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(d,r)=>r.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(d,r)=>r.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),D=async()=>{b.value=!0;const d=new ue({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const r=await d.competitions.getCompetitionDetails(p.value);a.value=r.title,m.value=r.participations.map(s=>{const _=s.player.exp||0,k=s.progress.gained||0;return{id:s.player.id,username:s.player.displayName,type:s.player.type,typeImage:i[s.player.type]||i.unknown,exp:h(_),rawXp:_,lastChangedAt:be(new Date(s.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:h(k),rawGainedXP:k,progressGained:h(s.progress.gained),progressStart:h(s.progress.start),progressEnd:h(s.progress.end),levelsGained:h(s.levels.gained),levelsStart:h(s.levels.start),levelsEnd:h(s.levels.end),progressLevels:`Gained: ${h(s.progress.gained)}, Start: ${h(s.progress.start)}, End: ${h(s.progress.end)}
              <br />
              Levels: Gained: ${s.levels.gained},
              Start: ${s.levels.start},
              End: ${s.levels.end}`,totalGained:`EXP: ${y(s.progress.gained)}
              <br />
              LVLS: ${s.levels.gained}`,totalStart:`EXP: ${y(s.progress.start)} <br /> LVLS: ${s.levels.start}`,totalEnd:`EXP: ${y(s.progress.end)} <br /> LVLS: ${s.levels.end}`,progressGainedClass:C(k),progressStartClass:C(s.progress.start),progressGainedClass:C(s.progress.gained),progressEndClass:C(s.progress.end)}})}catch(r){console.error("Failed to fetch competition data:",r)}finally{b.value=!1}},P=ve(()=>{if(!t.value.trim())return;const d=m.value.find(r=>r.username.toLowerCase().includes(t.value.toLowerCase()));if(d){const r=m.value.findIndex(s=>s.id===d.id);if(r!==-1){const[s]=m.value.splice(r,1);m.value.unshift(s),f.value=s.id,setTimeout(()=>f.value=null,2e3)}}else e.value=!0},300),V=Y(()=>t.value.trim()?m.value.filter(d=>d.username.toLowerCase().includes(t.value.toLowerCase())):m.value),O=d=>{p.value=d,D()};return le(D),{columns:S,filteredRows:V,searchQuery:t,highlightedId:f,debouncedSearch:P,playerNotFoundDialog:e,loading:b,updateCompetition:O,competitionTitle:a}}},Ge={class:"q-gutter-sm row items-center"},Pe=["innerHTML"],xe=["innerHTML"],Le=["innerHTML"],Ue=["innerHTML"],Ie=["src","alt"];function Me(m,t,f,e,b,p){return G(),M(W,null,{default:o(()=>[l("div",Ge,[n(de,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n(Z,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:o(()=>[n(ae,null,{default:o(()=>[n(x,{clickable:"",onClick:t[1]||(t[1]=a=>e.updateCompetition(78623))},{default:o(()=>[n(L,null,{default:o(()=>t[9]||(t[9]=[N("Farming")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[2]||(t[2]=a=>e.updateCompetition(71017))},{default:o(()=>[n(L,null,{default:o(()=>t[10]||(t[10]=[N("Construction")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[3]||(t[3]=a=>e.updateCompetition(65875))},{default:o(()=>[n(L,null,{default:o(()=>t[11]||(t[11]=[N("Agility")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[4]||(t[4]=a=>e.updateCompetition(58100))},{default:o(()=>[n(L,null,{default:o(()=>t[12]||(t[12]=[N("Fishing")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[5]||(t[5]=a=>e.updateCompetition(48025))},{default:o(()=>[n(L,null,{default:o(()=>t[13]||(t[13]=[N("Crafting")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[6]||(t[6]=a=>e.updateCompetition(44571))},{default:o(()=>[n(L,null,{default:o(()=>t[14]||(t[14]=[N("Prayer")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[7]||(t[7]=a=>e.updateCompetition(39755))},{default:o(()=>[n(L,null,{default:o(()=>t[15]||(t[15]=[N("Fletching")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(K,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":o(a=>[n(I,{class:E(a.row.progressClass)},{default:o(()=>[l("div",{innerHTML:a.row.progressLevels},null,8,Pe)]),_:2},1032,["class"])]),"body-cell-gainedXP":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.gainedXP},null,8,xe)]),_:2},1032,["class"])]),"body-cell-totalStart":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.totalStart},null,8,Le)]),_:2},1032,["class"])]),"body-cell-totalEnd":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.totalEnd},null,8,Ue)]),_:2},1032,["class"])]),"body-cell-type":o(a=>[n(I,null,{default:o(()=>[l("img",{src:a.row.typeImage,alt:a.row.type,width:"28",height:"28"},null,8,Ie)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ce,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[8]||(t[8]=a=>e.playerNotFoundDialog=a)},{default:o(()=>[n($,null,{default:o(()=>[n(ee,null,{default:o(()=>t[16]||(t[16]=[N(" Player not found. Please try a different query. ")])),_:1}),n(te,{align:"right"},{default:o(()=>[ge(n(J,{flat:"",label:"Close"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ve=z(Ne,[["render",Me]]);const Oe={setup(){const m=h=>{const y=h.getUTCFullYear(),S=String(h.getUTCMonth()+1).padStart(2,"0"),D=String(h.getUTCDate()).padStart(2,"0");return`${y}/${S}/${D}`},t=(h,y)=>{const S=[];let D=new Date(h);for(;D<=y;)S.push(m(D)),D.setUTCDate(D.getUTCDate()+1);return S},f=h=>{const y=p.value[h];return y?y.color||"white":null},p=c((h=>{const y={};return Object.keys(h).forEach(S=>{const{rangeEnd:D,...P}=h[S];t(new Date(S),new Date(D||S)).forEach(O=>{y[O]={...P}})}),y})({"2024/12/06":{rangeEnd:"2025/01/22",title:"Leagues V: Raging Echoes",description:"Leagues V: Raging Echoes is a temporary game mode in Old School RuneScape (OSRS) that will begin November 27, 2024.",image:"/homepage/leagues/virtus.png",color:"info"},"2024/12/31":{rangeEnd:"2024/12/31",title:"New Year's Rumble",description:"1.5B in prizes, hunters vs. hunted in PVP world at 3pm EST!",image:"/homepage/bonanza.png",color:"primary"},"2025/01/19":{rangeEnd:"2025/01/26",title:"GROUP BOSS OF THE WEEK - ZILY ",description:"BOTW will be a group competition and buyin phase will be January 12th - Jan 18th.",image:"/calendar/zily.png",color:"negative"},"2025/02/01":{rangeEnd:"2025/02/01",title:"Fashionscape Fiesta",description:"Congratulations to the winners! We plan to throw more fashionscape events in the future, perhaps with different themes?!",image:"/homepage/fashionfeb/lineup2.png",color:"pink"},"2025/02/16":{rangeEnd:"2025/03/02",title:"Skill of the Week - Farming",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/toollep.png",color:"light-green"},"2025/03/23":{rangeEnd:"2025/03/30",title:"Skill of the Week - Magic",description:"PAYOUT TOP 3 XP / THRESHOLDS",image:"/calendar/magic.png",color:"blue-14"}})),a=[{startDate:new Date(Date.UTC(2024,11,6)),endDate:new Date(Date.UTC(2025,0,22))},{startDate:new Date(Date.UTC(2024,11,31)),endDate:new Date(Date.UTC(2024,11,31))},{startDate:new Date(Date.UTC(2025,0,19)),endDate:new Date(Date.UTC(2025,0,26))},{startDate:new Date(Date.UTC(2025,1,1)),endDate:new Date(Date.UTC(2025,1,1))},{startDate:new Date(Date.UTC(2025,1,16)),endDate:new Date(Date.UTC(2025,2,2))},{startDate:new Date(Date.UTC(2025,2,23)),endDate:new Date(Date.UTC(2025,2,30))}],g=c((h=>{const y=new Set;return h.forEach(({startDate:S,endDate:D})=>{t(S,D).forEach(P=>y.add(P))}),Array.from(y).sort()})(a)),C=m(new Date);return g.value.push(C),{splitterModel:c(50),date:c(C),events:g,eventDetails:p,getEventColor:f}}},Re={class:"q-pa-md"},Fe={class:"text-h4 q-mb-md"};function Be(m,t,f,e,b,p){return G(),X("div",null,[n(Te,{modelValue:e.splitterModel,"onUpdate:modelValue":t[2]||(t[2]=a=>e.splitterModel=a),style:{height:"450px"}},{before:o(()=>[l("div",Re,[n(_e,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=a=>e.date=a),events:e.events,"event-color":e.getEventColor},null,8,["modelValue","events","event-color"])])]),after:o(()=>[n(ye,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=a=>e.date=a),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:o(()=>[(G(!0),X(se,null,oe(e.events,a=>(G(),M(we,{key:a,name:a},{default:o(()=>{var i,g,C;return[l("div",Fe,u(((i=e.eventDetails[a])==null?void 0:i.title)||"No Event Scheduled"),1),l("p",null,u(((g=e.eventDetails[a])==null?void 0:g.description)||"No details available, please check out other planned events by viewing dates that are highlighted on the calendar."),1),(C=e.eventDetails[a])!=null&&C.image?(G(),M(De,{key:0,src:e.eventDetails[a].image,alt:"Event Image",style:{"max-width":"100%","max-height":"200px"}},null,8,["src"])):fe("",!0)]}),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}var Qe=z(Oe,[["render",Be],["__scopeId","data-v-183ad881"]]);const ze={name:"TeamLeaderboard",setup(){const m=c([]),t=c(!0),f=c({}),e="ag5idzcxq01s1yoocwth0llc",b={low:"progress-low",medium:"progress-medium",high:"progress-high"},p=r=>r<5e5?b.low:r<2e6?b.medium:b.high,a=c([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"team",label:"Team",align:"left",field:"team",sortable:!0},{name:"lastUpdated",label:"Last Updated",align:"center",field:"lastUpdated",sortable:!0}]),i=["clue_scrolls_hard","slayer","tombs_of_amascut","tombs_of_amascut_expert","zalcano","smithing","hitpoints","clue_scrolls_elite","thieving","agility","runecrafting"],g={},C=5*60*1e3,h=r=>new Promise(s=>setTimeout(s,r)),y=async(r,s={},_=3,k=1e3)=>{try{const w=await fetch(r,s);if(!w.ok)if(w.status===429||w.status>=500&&w.status<600){if(_>0)return console.warn(`Request failed with status ${w.status}. Retrying in ${k}ms...`),await h(k),y(r,s,_-1,k*2);throw new Error(`Request failed with status ${w.status} after retries.`)}else throw new Error(`Request failed with status ${w.status}.`);return w}catch(w){if(_>0)return console.warn(`Fetch error: ${w.message}. Retrying in ${k}ms...`),await h(k),y(r,s,_-1,k*2);throw w}},S=async r=>{const s=`https://api.wiseoldman.net/v2/competitions/68296/csv?metric=${r}`,_=r,k=Date.now();if(g[_]&&k-g[_].timestamp<C)return console.log(`Using cached data for metric: ${r}`),g[_].data;const U=await(await y(s,{headers:{Authorization:`Bearer ${e}`}})).text();return g[_]={timestamp:k,data:U},U},D=async()=>{t.value=!0;try{const r={};f.value={};for(const s of i)try{const _=await S(s);he.parse(_,{header:!0,skipEmptyLines:!0}).data.forEach(w=>{const U=w.Username,A=w.Team||"Unknown",q=parseInt(w.Gained)||0;r[U]||(r[U]={id:U,username:U,team:A,rank:parseInt(w.Rank),lastUpdated:w["Last Updated"]}),r[U][s]=q,r[U][`${s}Formatted`]=V(q),r[U][`${s}Class`]=p(q),f.value[A]||(f.value[A]={}),f.value[A][s]=(f.value[A][s]||0)+q}),a.value.find(w=>w.name===s)||a.value.push({name:s,label:s.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),align:"right",field:s,sortable:!0})}catch(_){console.error(`Error fetching metric ${s}:`,_)}m.value=Object.values(r)}catch(r){console.error("Error fetching metrics:",r)}finally{t.value=!1}},P=r=>new Intl.NumberFormat().format(r),V=r=>r>0?`+${P(r)}`:P(r),O=Y(()=>Object.entries(f.value).map(([r,s])=>({team:r,...s,...Object.fromEntries(Object.keys(s).map(_=>[`${_}Formatted`,V(s[_])]))}))),d=Y(()=>{const r=Object.keys(f.value).length?Object.keys(f.value[Object.keys(f.value)[0]]||{}).map(s=>({name:s,label:s.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase()),align:"right",field:s,sortable:!0})):[];return[{name:"team",label:"Team",align:"left",field:"team",sortable:!0},...r]});return le(D),{tableData:m,columns:a,loading:t,formatNumber:P,teamsGained:f,teamTableData:O,teamColumns:d}}};function Ae(m,t,f,e,b,p){return G(),M(W,null,{default:o(()=>[n(K,{rows:e.tableData,columns:e.columns,"row-key":"username",loading:e.loading,"rows-per-page-options":[5,10,20,-1],class:"team-table",title:"Player Stats"},{"body-cell":o(({row:a,col:i})=>[n(I,{class:E(a[`${i.name}Class`])},{default:o(()=>[N(u(i.name==="rank"||i.name==="username"||i.name==="team"||i.name==="lastUpdated"?a[i.field]:a[`${i.name}Formatted`]||e.formatNumber(a[i.field]||0)),1)]),_:2},1032,["class"])]),_:1},8,["rows","columns","loading"]),Object.keys(e.teamsGained).length?(G(),M(K,{key:0,rows:e.teamTableData,columns:e.teamColumns,"row-key":"team",class:"team-table",title:"Team Stats"},{"body-cell":o(({row:a,col:i})=>[n(I,null,{default:o(()=>[N(u(i.name==="team"?a.team:a[`${i.name}Formatted`]||e.formatNumber(a[i.name]||0)),1)]),_:2},1024)]),_:1},8,["rows","columns"])):fe("",!0)]),_:1})}var He=z(ze,[["render",Ae],["__scopeId","data-v-d9253876"]]);const qe=["src","alt"],Xe={__name:"EventButton",props:{label:{type:String,required:!0},tooltip:{type:String,required:!0},icon:{type:String,required:!0},animationClass:{type:String,required:!0},buttonClass:{type:String,default:""},active:{type:Boolean,default:!1}},emits:["click"],setup(m,{emit:t}){const f=m,e=t,b=c(null);function p(i,g){i.classList.remove(g),i.offsetWidth,i.classList.add(g)}Ee(()=>f.active,i=>{i&&b.value&&p(b.value,f.animationClass)});function a(){e("click")}return(i,g)=>(G(),M(J,{glossy:"",dense:"",stack:"",label:m.label,color:m.active?"primary":"secondary",class:E([m.buttonClass,m.active?m.animationClass:""]),onClick:a},{default:o(()=>[n(ke,null,{default:o(()=>[N(u(m.tooltip),1)]),_:1}),l("img",{ref_key:"iconRef",ref:b,class:E(["event-icon",m.active?m.animationClass:""]),src:m.icon,alt:m.label},null,10,qe)]),_:1},8,["label","color","class"]))}};var j=z(Xe,[["__scopeId","data-v-61fd6b16"]]);const We={setup(){const m="ag5idzcxq01s1yoocwth0llc",t=new Map,f=async(v,R={},F=5,B=1e3)=>{try{const T=await fetch(v,R);if(T.status===429)throw new Error("Rate limit exceeded");if(!T.ok)throw new Error(`HTTP error! Status: ${T.status}`);return T}catch(T){if(F>0)return console.warn(`Request failed: ${T.message}. Retrying in ${B}ms...`),await new Promise(H=>setTimeout(H,B)),f(v,R,F-1,B*2);throw T}},e=async(v,R={},F=5,B=1e3)=>{if(t.has(v))return console.log("Using cached data for",v),t.get(v);const H=await(await f(v,R,F,B)).text();return t.set(v,H),H},b=[{slug:"Team+Stolen+Gun",display:"Team Stolen Gun"},{slug:"Team+NOKOMIS",display:"Team NOKOMIS"},{slug:"Team+ren+vvs",display:"Team ren vvs"}],p=c(null),a=c(0),i=c(0),g=c(0),C=c(0),h=c(0),y=c(0),S=c(0),D=c(0),P=c(0),V=c(0),O=c(0),d=c(0),r=c(0);re(()=>{d.value=Number(g.value)+Number(C.value),r.value=Number(a.value)+Number(i.value)});const s=c(!0),_=c(3e4),k=v=>{if(!s.value){alert("Please wait 30 seconds before selecting a new team.");return}p.value=v,s.value=!1,setTimeout(()=>{s.value=!0},_.value)},w=["clue_scrolls_hard","clue_scrolls_elite","slayer","tombs_of_amascut","tombs_of_amascut_expert","hitpoints","thieving","agility","runecrafting","zalcano","smithing"],U=Ce.exports.throttle(async()=>{if(!!p.value)try{await Promise.all(w.map(async v=>{const R=`https://api.wiseoldman.net/v2/competitions/68296/csv?table=team&teamName=${p.value.slug}&metric=${v}`,F=await e(R,{headers:{Authorization:`Bearer ${m}`}}),T=he.parse(F,{header:!0,skipEmptyLines:!0}).data.reduce((H,pe)=>{const ne=Number(pe.Gained);return H+(isNaN(ne)?0:ne)},0);v==="agility"&&(S.value=T),v==="slayer"&&(D.value=T),v==="clue_scrolls_hard"&&(a.value=T),v==="clue_scrolls_elite"&&(i.value=T),v==="tombs_of_amascut"&&(g.value=T),v==="tombs_of_amascut_expert"&&(C.value=T),v==="hitpoints"&&(h.value=T),v==="thieving"&&(y.value=T),v==="runecrafting"&&(P.value=T),v==="zalcano"&&(V.value=T),v==="smithing"&&(O.value=T)}))}catch(v){console.error("Error fetching data:",v)}},5e3);return re(()=>{p.value&&U()}),{delayTimer:_,teams:b,selectedTeam:p,updateSelectedTeam:k,agilityGained:S,clueScrollEliteGained:i,clueScrollHardGained:a,toaGained:g,toaExpertGained:C,hitpointsGained:h,thievingGained:y,runecraftingGained:P,zalcanoGained:V,smithingGained:O,slayerGained:D,toaTotal:d,cluesTotal:r,computePosition:(v,R)=>{const[F,,B]=R;let T=(v-F)/(B-F)*100;return Math.max(0,Math.min(100,T))},getThresholdClass:(v,R)=>{const[F,B,T]=R;return v<B?"progress-low":v<T?"progress-medium":"progress-high"},metricThresholds:{agility:[5e5,2e6,5e6],slayer:[1e6,5e6,1e7],runecrafting:[5e5,2e6,4e6],thieving:[25e5,5e6,1e7],hitpoints:[15e5,3e6,6e6],clues:[150,300,600],tombs:[150,500,1e3],zalcano:[250,500,1e3],smithing:[5e5,2e6,4e6]},formatNumber:v=>new Intl.NumberFormat().format(v)}}},je={class:"q-gutter-sm row items-center"},Ke={class:"stats-container"},Ye={class:"stats-table"},Je={class:"stats-cell"},Ze={class:"progress-cell"},$e={class:"threshold-label threshold-low"},et={class:"threshold-label threshold-medium"},tt={class:"threshold-label threshold-high"},at={class:"stats-cell"},lt={class:"progress-cell"},st={class:"threshold-label threshold-low"},ot={class:"threshold-label threshold-medium"},nt={class:"threshold-label threshold-high"},rt={class:"stats-cell"},it={class:"progress-cell"},dt={class:"threshold-label threshold-low"},ct={class:"threshold-label threshold-medium"},mt={class:"threshold-label threshold-high"},ut={class:"stats-cell"},ht={class:"progress-cell"},gt={class:"threshold-label threshold-low"},ft={class:"threshold-label threshold-medium"},vt={class:"threshold-label threshold-high"},bt={class:"stats-cell"},pt={class:"progress-cell"},_t={class:"threshold-label threshold-low"},yt={class:"threshold-label threshold-medium"},wt={class:"threshold-label threshold-high"},Tt={class:"stats-cell"},Ct={class:"progress-cell"},Dt={class:"threshold-label threshold-low"},kt={class:"threshold-label threshold-medium"},Et={class:"threshold-label threshold-high"},St={class:"stats-cell"},Nt={class:"progress-cell"},Gt={class:"threshold-label threshold-low"},Pt={class:"threshold-label threshold-medium"},xt={class:"threshold-label threshold-high"},Lt={class:"stats-cell"},Ut={class:"progress-cell"},It={class:"threshold-label threshold-low"},Mt={class:"threshold-label threshold-medium"},Vt={class:"threshold-label threshold-high"},Ot={class:"stats-cell"},Rt={class:"progress-cell"},Ft={class:"threshold-label threshold-low"},Bt={class:"threshold-label threshold-medium"},Qt={class:"threshold-label threshold-high"};function zt(m,t,f,e,b,p){return G(),M(W,{class:"page-container"},{default:o(()=>[l("div",je,[n(Z,{size:"xl",glossy:"",ripple:"",flat:"","text-color":"purple-7",outline:"",label:e.selectedTeam?e.selectedTeam.display:"Please select a Team",class:"col-auto","no-caps":""},{default:o(()=>[n(ae,null,{default:o(()=>[(G(!0),X(se,null,oe(e.teams,a=>(G(),M(x,{key:a.slug,clickable:"",onClick:i=>e.updateSelectedTeam(a)},{default:o(()=>[n(L,null,{default:o(()=>[N(u(a.display),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),t[9]||(t[9]=l("p",{style:{"text-shadow":"1px 1px 1px black"}}," Please give the tables a few seconds to to load; it uses wiseoldman to fetch live data! ",-1)),l("div",Ke,[l("table",Ye,[l("tr",null,[l("td",Je,[l("div",Ze,[l("div",$e,u(e.formatNumber(e.metricThresholds.agility[0])),1),l("div",et,u(e.formatNumber(e.metricThresholds.agility[1])),1),l("div",tt,u(e.formatNumber(e.metricThresholds.agility[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.agilityGained,e.metricThresholds.agility)]),style:Q({top:e.computePosition(e.agilityGained,e.metricThresholds.agility)+"%"})},u(e.formatNumber(e.agilityGained)),7)]),t[0]||(t[0]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/agility.png"})],-1))]),l("td",at,[l("div",lt,[l("div",st,u(e.formatNumber(e.metricThresholds.slayer[0])),1),l("div",ot,u(e.formatNumber(e.metricThresholds.slayer[1])),1),l("div",nt,u(e.formatNumber(e.metricThresholds.slayer[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.slayerGained,e.metricThresholds.slayer)]),style:Q({top:e.computePosition(e.slayerGained,e.metricThresholds.slayer)+"%"})},u(e.formatNumber(e.slayerGained)),7)]),t[1]||(t[1]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/slayer.png"})],-1))]),l("td",rt,[l("div",it,[l("div",dt,u(e.formatNumber(e.metricThresholds.runecrafting[0])),1),l("div",ct,u(e.formatNumber(e.metricThresholds.runecrafting[1])),1),l("div",mt,u(e.formatNumber(e.metricThresholds.runecrafting[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.runecraftingGained,e.metricThresholds.runecrafting)]),style:Q({top:e.computePosition(e.runecraftingGained,e.metricThresholds.runecrafting)+"%"})},u(e.formatNumber(e.runecraftingGained)),7)]),t[2]||(t[2]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/runecraft.png"})],-1))])]),l("tr",null,[l("td",ut,[l("div",ht,[l("div",gt,u(e.formatNumber(e.metricThresholds.thieving[0])),1),l("div",ft,u(e.formatNumber(e.metricThresholds.thieving[1])),1),l("div",vt,u(e.formatNumber(e.metricThresholds.thieving[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.thievingGained,e.metricThresholds.thieving)]),style:Q({top:e.computePosition(e.thievingGained,e.metricThresholds.thieving)+"%"})},u(e.formatNumber(e.thievingGained)),7)]),t[3]||(t[3]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/thieving.png"})],-1))]),l("td",bt,[l("div",pt,[l("div",_t,u(e.formatNumber(e.metricThresholds.tombs[0])),1),l("div",yt,u(e.formatNumber(e.metricThresholds.tombs[1])),1),l("div",wt,u(e.formatNumber(e.metricThresholds.tombs[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.toaTotal,e.metricThresholds.tombs)]),style:Q({top:e.computePosition(e.toaTotal,e.metricThresholds.tombs)+"%"})},u(e.formatNumber(e.toaTotal)),7)]),t[4]||(t[4]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/toa.png"}),l("img",{src:"/sprites/toaexpert.png"})],-1))]),l("td",Tt,[l("div",Ct,[l("div",Dt,u(e.formatNumber(e.metricThresholds.zalcano[0])),1),l("div",kt,u(e.formatNumber(e.metricThresholds.zalcano[1])),1),l("div",Et,u(e.formatNumber(e.metricThresholds.zalcano[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.zalcanoGained,e.metricThresholds.zalcano)]),style:Q({top:e.computePosition(e.zalcanoGained,e.metricThresholds.zalcano)+"%"})},u(e.formatNumber(e.zalcanoGained)),7)]),t[5]||(t[5]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/zalcano.png"})],-1))])]),l("tr",null,[l("td",St,[l("div",Nt,[l("div",Gt,u(e.formatNumber(e.metricThresholds.hitpoints[0])),1),l("div",Pt,u(e.formatNumber(e.metricThresholds.hitpoints[1])),1),l("div",xt,u(e.formatNumber(e.metricThresholds.hitpoints[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.hitpointsGained,e.metricThresholds.hitpoints)]),style:Q({top:e.computePosition(e.hitpointsGained,e.metricThresholds.hitpoints)+"%"})},u(e.formatNumber(e.hitpointsGained)),7)]),t[6]||(t[6]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/hitpoints.png"})],-1))]),l("td",Lt,[l("div",Ut,[l("div",It,u(e.formatNumber(e.metricThresholds.clues[0])),1),l("div",Mt,u(e.formatNumber(e.metricThresholds.clues[1])),1),l("div",Vt,u(e.formatNumber(e.metricThresholds.clues[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.cluesTotal,e.metricThresholds.clues)]),style:Q({top:e.computePosition(e.cluesTotal,e.metricThresholds.clues)+"%"})},u(e.formatNumber(e.cluesTotal)),7)]),t[7]||(t[7]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/cluehard.png"}),l("img",{src:"/sprites/clueelite.png"})],-1))]),l("td",Ot,[l("div",Rt,[l("div",Ft,u(e.formatNumber(e.metricThresholds.smithing[0])),1),l("div",Bt,u(e.formatNumber(e.metricThresholds.smithing[1])),1),l("div",Qt,u(e.formatNumber(e.metricThresholds.smithing[2])),1),l("div",{class:E(["current-value",e.getThresholdClass(e.smithingGained,e.metricThresholds.smithing)]),style:Q({top:e.computePosition(e.smithingGained,e.metricThresholds.smithing)+"%"})},u(e.formatNumber(e.smithingGained)),7)]),t[8]||(t[8]=l("div",{class:"metric-label"},[l("img",{src:"/sprites/smithing.png"})],-1))])])])])]),_:1})}var At=z(We,[["render",zt],["__scopeId","data-v-6aaef330"]]);const Ht={name:"UpdatedCompetitionTable",setup(){c([]);const m=c([]),t=c(""),f=c(null),e=c(!1),b=c(!1),p=c(75869),a=c("Loading..."),i={regular:"/icons/maxed.png",ironman:"/icons/ironman.png",ultimate:"/icons/uim.png",hardcore:"/icons/hcim.png",unknown:"/icons/unknown.png"},g={low:"progress-low",medium:"progress-medium",high:"progress-high"},C=d=>d<50?g.none:d<300?g.low:d<600?g.medium:g.high,h=d=>d<1e6?`${(d/1e3).toFixed(4)}K`:`${(d/1e6).toFixed(2)}M`,y=d=>`${(d/1e6).toFixed(4)}M`,S=c([{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"type",label:"Type",align:"left",field:"type",format:(d,r)=>`<img src="${r.typeImage}" alt="${r.type}" />`},{name:"exp",label:"Overall",align:"right",field:"rawXp",format:(d,r)=>r.exp,sortable:!0},{name:"gainedXP",label:"Gained",align:"right",field:"rawGainedXP",format:(d,r)=>r.rawGained,sortable:!0},{name:"totalStart",label:"Start",align:"right",field:"totalStart",sortable:!0},{name:"totalEnd",label:"End",align:"right",field:"totalEnd",sortable:!0}]),D=async()=>{b.value=!0;const d=new ue({apiKey:{}.VUE_APP_WOM_API_KEY,userAgent:"dopesyc"});try{const r=await d.competitions.getCompetitionDetails(p.value);a.value=r.title,m.value=r.participations.map(s=>{const _=s.player.exp||0,k=s.progress.gained||0;return{id:s.player.id,username:s.player.displayName,type:s.player.type,typeImage:i[s.player.type]||i.unknown,exp:h(_),rawXp:_,lastChangedAt:be(new Date(s.player.lastChangedAt),new Date,{addSuffix:!0}),gainedXP:k,rawGainedXP:k,progressGained:h(s.progress.gained),progressStart:h(s.progress.start),progressEnd:h(s.progress.end),levelsGained:h(s.levels.gained),levelsStart:h(s.levels.start),levelsEnd:h(s.levels.end),progressLevels:`Gained: ${h(s.progress.gained)}, Start: ${h(s.progress.start)}, End: ${h(s.progress.end)}
              <br />
              Levels: Gained: ${s.levels.gained},
              Start: ${s.levels.start},
              End: ${s.levels.end}`,totalGained:`EXP: ${y(s.progress.gained)}
              <br />
              LVLS: ${s.levels.gained}`,totalStart:`${s.progress.start}`,totalEnd:`${s.progress.end}
            `,progressGainedClass:C(k),progressStartClass:C(s.progress.start),progressGainedClass:C(s.progress.gained),progressEndClass:C(s.progress.end)}})}catch(r){console.error("Failed to fetch competition data:",r)}finally{b.value=!1}},P=ve(()=>{if(!t.value.trim())return;const d=m.value.find(r=>r.username.toLowerCase().includes(t.value.toLowerCase()));if(d){const r=m.value.findIndex(s=>s.id===d.id);if(r!==-1){const[s]=m.value.splice(r,1);m.value.unshift(s),f.value=s.id,setTimeout(()=>f.value=null,2e3)}}else e.value=!0},300),V=Y(()=>t.value.trim()?m.value.filter(d=>d.username.toLowerCase().includes(t.value.toLowerCase())):m.value),O=d=>{p.value=d,D()};return le(D),{columns:S,filteredRows:V,searchQuery:t,highlightedId:f,debouncedSearch:P,playerNotFoundDialog:e,loading:b,updateCompetition:O,competitionTitle:a}}},qt={class:"q-gutter-sm row items-center"},Xt=["innerHTML"],Wt=["innerHTML"],jt=["innerHTML"],Kt=["innerHTML"],Yt=["src","alt"];function Jt(m,t,f,e,b,p){return G(),M(W,null,{default:o(()=>[l("div",qt,[n(de,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),debounce:"300",placeholder:"Search by username",outlined:"",class:"col"},null,8,["modelValue"]),n(Z,{flat:"",outline:"",label:e.competitionTitle,class:"col-auto","no-caps":""},{default:o(()=>[n(ae,null,{default:o(()=>[n(x,{clickable:"",onClick:t[1]||(t[1]=a=>e.updateCompetition(75869))},{default:o(()=>[n(L,null,{default:o(()=>t[7]||(t[7]=[N("Zilyana")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[2]||(t[2]=a=>e.updateCompetition(68468))},{default:o(()=>[n(L,null,{default:o(()=>t[8]||(t[8]=[N("Duke")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[3]||(t[3]=a=>e.updateCompetition(50451))},{default:o(()=>[n(L,null,{default:o(()=>t[9]||(t[9]=[N("Zulrah")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[4]||(t[4]=a=>e.updateCompetition(46277))},{default:o(()=>[n(L,null,{default:o(()=>t[10]||(t[10]=[N("General Graardor")])),_:1})]),_:1}),n(x,{clickable:"",onClick:t[5]||(t[5]=a=>e.updateCompetition(40782))},{default:o(()=>[n(L,null,{default:o(()=>t[11]||(t[11]=[N("Scurrius")])),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),n(K,{rows:e.filteredRows,columns:e.columns,"row-key":"id",loading:e.loading,"rows-per-page-options":[15,30,60,e.filteredRows.length],class:"input-box"},{"body-cell-progressLevels":o(a=>[n(I,{class:E(a.row.progressClass)},{default:o(()=>[l("div",{innerHTML:a.row.progressLevels},null,8,Xt)]),_:2},1032,["class"])]),"body-cell-gainedXP":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.gainedXP},null,8,Wt)]),_:2},1032,["class"])]),"body-cell-totalStart":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.totalStart},null,8,jt)]),_:2},1032,["class"])]),"body-cell-totalEnd":o(a=>[n(I,{class:E(a.row.progressGainedClass)},{default:o(()=>[l("div",{innerHTML:a.row.totalEnd},null,8,Kt)]),_:2},1032,["class"])]),"body-cell-type":o(a=>[n(I,null,{default:o(()=>[l("img",{src:a.row.typeImage,alt:a.row.type,width:"28",height:"28"},null,8,Yt)]),_:2},1024)]),_:1},8,["rows","columns","loading","rows-per-page-options"]),n(ce,{modelValue:e.playerNotFoundDialog,"onUpdate:modelValue":t[6]||(t[6]=a=>e.playerNotFoundDialog=a)},{default:o(()=>[n($,null,{default:o(()=>[n(ee,null,{default:o(()=>t[12]||(t[12]=[N(" Player not found. Please try a different query. ")])),_:1}),n(te,{align:"right"},{default:o(()=>[ge(n(J,{flat:"",label:"Close"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Zt=z(Ht,[["render",Jt]]);const $t={name:"BingoWrapper",components:{NewBingoTest:At,BingoTable2:He}};function ea(m,t,f,e,b,p){const a=ie("NewBingoTest"),i=ie("BingoTable2");return G(),X("div",null,[n(a),n(i)])}var ta=z($t,[["render",ea],["__scopeId","data-v-36b0257e"]]);const aa={class:"q-gutter-md row justify-center"},la={class:"q-mt-md"},sa={__name:"EventsPage",setup(m){const t=c([]),f={calendar:Qe,competitions:Ve,botw:Zt,bingo:ta};function e(a){return t.value.some(i=>i.name===a)}function b(a){e(a)?p(a):t.value.push({name:a,component:f[a]})}function p(a){t.value=t.value.filter(i=>i.name!==a)}return(a,i)=>(G(),M(W,{class:"q-pa-md"},{default:o(()=>[l("div",aa,[n(j,{label:"Calendar",tooltip:"Calendar",icon:"/icons/calendarbook.png",animationClass:"animate__fadeInDown",buttonClass:"leagues-style",active:e("calendar"),onClick:i[0]||(i[0]=g=>b("calendar"))},null,8,["active"]),n(j,{label:"Skill of the Week",tooltip:"Skill of the Week",icon:"/icons/ARTSNEW.png",animationClass:"animate__zoomIn",buttonClass:"wild-style",active:e("competitions"),onClick:i[1]||(i[1]=g=>b("competitions"))},null,8,["active"]),n(j,{label:"Boss of the Week",tooltip:"Boss of the Week",icon:"/icons/pvm.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("botw"),onClick:i[2]||(i[2]=g=>b("botw"))},null,8,["active"]),n(j,{label:"Bingo Table",tooltip:"Bingo",icon:"/icons/clan1.png",animationClass:"animate__jello",buttonClass:"bingo-style",active:e("bingo"),onClick:i[3]||(i[3]=g=>b("bingo"))},null,8,["active"])]),l("div",la,[(G(!0),X(se,null,oe(t.value,g=>(G(),M($,{key:g.name,class:"q-mb-md"},{default:o(()=>[n(ee,null,{default:o(()=>[(G(),M(Se(g.component)))]),_:2},1024),n(te,{align:"right"},{default:o(()=>[n(J,{flat:"",label:"Close",color:"negative",onClick:C=>p(g.name)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))}};var ua=z(sa,[["__scopeId","data-v-710ea228"]]);export{He as B,Ve as C,ua as E,At as N};
